var $r=Object.defineProperty;var Or=e=>{throw TypeError(e)};var Br=(e,t,n)=>t in e?$r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var C=(e,t,n)=>Br(e,typeof t!="symbol"?t+"":t,n);var Rt=(e,t,n)=>t.has(e)?Or("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n);var we,I,Nn,se,Lt,En,et,ft,tt,nt,Tn,ye={},Pn=[],Gr=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ge=Array.isArray;function ee(e,t){for(var n in t)e[n]=t[n];return e}function In(e){var t=e.parentNode;t&&t.removeChild(e)}function ve(e,t,n){var i,o,s,c={};for(s in t)s=="key"?i=t[s]:s=="ref"?o=t[s]:c[s]=t[s];if(arguments.length>2&&(c.children=arguments.length>3?we.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)c[s]===void 0&&(c[s]=e.defaultProps[s]);return fe(e,c,i,o,null)}function fe(e,t,n,i,o){var s={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:o??++Nn,__i:-1,__u:0};return o==null&&I.vnode!=null&&I.vnode(s),s}function k(e){return e.children}function te(e,t){this.props=e,this.context=t}function oe(e,t){if(t==null)return e.__?oe(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?oe(e):null}function Sn(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Sn(e)}}function rt(e){(!e.__d&&(e.__d=!0)&&se.push(e)&&!$e.__r++||Lt!==I.debounceRendering)&&((Lt=I.debounceRendering)||En)($e)}function $e(){var e,t,n,i,o,s,c,a;for(se.sort(et);e=se.shift();)e.__d&&(t=se.length,i=void 0,s=(o=(n=e).__v).__e,c=[],a=[],n.__P&&((i=ee({},o)).__v=o.__v+1,I.vnode&&I.vnode(i),_t(n.__P,i,o,n.__n,n.__P.namespaceURI,32&o.__u?[s]:null,c,s??oe(o),!!(32&o.__u),a),i.__v=o.__v,i.__.__k[i.__i]=i,Dn(c,i,a),i.__e!=s&&Sn(i)),se.length>t&&se.sort(et));$e.__r=0}function Cn(e,t,n,i,o,s,c,a,l,u,h){var d,f,m,_,w,N=i&&i.__k||Pn,v=t.length;for(n.__d=l,Ur(n,t,N),l=n.__d,d=0;d<v;d++)(m=n.__k[d])!=null&&typeof m!="boolean"&&typeof m!="function"&&(f=m.__i===-1?ye:N[m.__i]||ye,m.__i=d,_t(e,m,f,o,s,c,a,l,u,h),_=m.__e,m.ref&&f.ref!=m.ref&&(f.ref&&gt(f.ref,null,m),h.push(m.ref,m.__c||_,m)),w==null&&_!=null&&(w=_),65536&m.__u||f.__k===m.__k?(l&&!l.isConnected&&(l=oe(f)),l=An(m,l,e)):typeof m.type=="function"&&m.__d!==void 0?l=m.__d:_&&(l=_.nextSibling),m.__d=void 0,m.__u&=-196609);n.__d=l,n.__e=w}function Ur(e,t,n){var i,o,s,c,a,l=t.length,u=n.length,h=u,d=0;for(e.__k=[],i=0;i<l;i++)c=i+d,(o=e.__k[i]=(o=t[i])==null||typeof o=="boolean"||typeof o=="function"?null:typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?fe(null,o,null,null,null):Ge(o)?fe(k,{children:o},null,null,null):o.constructor===void 0&&o.__b>0?fe(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o)!=null?(o.__=e,o.__b=e.__b+1,a=zr(o,n,c,h),o.__i=a,s=null,a!==-1&&(h--,(s=n[a])&&(s.__u|=131072)),s==null||s.__v===null?(a==-1&&d--,typeof o.type!="function"&&(o.__u|=65536)):a!==c&&(a===c+1?d++:a>c?h>l-c?d+=a-c:d--:a<c?a==c-1&&(d=a-c):d=0,a!==i+d&&(o.__u|=65536))):(s=n[c])&&s.key==null&&s.__e&&!(131072&s.__u)&&(s.__e==e.__d&&(e.__d=oe(s)),it(s,s,!1),n[c]=null,h--);if(h)for(i=0;i<u;i++)(s=n[i])!=null&&!(131072&s.__u)&&(s.__e==e.__d&&(e.__d=oe(s)),it(s,s))}function An(e,t,n){var i,o;if(typeof e.type=="function"){for(i=e.__k,o=0;i&&o<i.length;o++)i[o]&&(i[o].__=e,t=An(i[o],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function ne(e,t){return t=t||[],e==null||typeof e=="boolean"||(Ge(e)?e.some(function(n){ne(n,t)}):t.push(e)),t}function zr(e,t,n,i){var o=e.key,s=e.type,c=n-1,a=n+1,l=t[n];if(l===null||l&&o==l.key&&s===l.type&&!(131072&l.__u))return n;if(i>(l!=null&&!(131072&l.__u)?1:0))for(;c>=0||a<t.length;){if(c>=0){if((l=t[c])&&!(131072&l.__u)&&o==l.key&&s===l.type)return c;c--}if(a<t.length){if((l=t[a])&&!(131072&l.__u)&&o==l.key&&s===l.type)return a;a++}}return-1}function $t(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Gr.test(t)?n:n+"px"}function Ne(e,t,n,i,o){var s;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||$t(e.style,t,"");if(n)for(t in n)i&&n[t]===i[t]||$t(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")s=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||t==="onFocusOut"||t==="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?i?n.u=i.u:(n.u=ft,e.addEventListener(t,s?nt:tt,s)):e.removeEventListener(t,s?nt:tt,s);else{if(o=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function Ot(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=ft++;else if(t.t<n.u)return;return n(I.event?I.event(t):t)}}}function _t(e,t,n,i,o,s,c,a,l,u){var h,d,f,m,_,w,N,v,p,y,g,x,b,P,T,S=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(l=!!(32&n.__u),s=[a=t.__e=n.__e]),(h=I.__b)&&h(t);e:if(typeof S=="function")try{if(v=t.props,p=(h=S.contextType)&&i[h.__c],y=h?p?p.props.value:h.__:i,n.__c?N=(d=t.__c=n.__c).__=d.__E:("prototype"in S&&S.prototype.render?t.__c=d=new S(v,y):(t.__c=d=new te(v,y),d.constructor=S,d.render=Fr),p&&p.sub(d),d.props=v,d.state||(d.state={}),d.context=y,d.__n=i,f=d.__d=!0,d.__h=[],d._sb=[]),d.__s==null&&(d.__s=d.state),S.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=ee({},d.__s)),ee(d.__s,S.getDerivedStateFromProps(v,d.__s))),m=d.props,_=d.state,d.__v=t,f)S.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(S.getDerivedStateFromProps==null&&v!==m&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(v,y),!d.__e&&(d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(v,d.__s,y)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(d.props=v,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(D){D&&(D.__=t)}),g=0;g<d._sb.length;g++)d.__h.push(d._sb[g]);d._sb=[],d.__h.length&&c.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(v,d.__s,y),d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(m,_,w)})}if(d.context=y,d.props=v,d.__P=e,d.__e=!1,x=I.__r,b=0,"prototype"in S&&S.prototype.render){for(d.state=d.__s,d.__d=!1,x&&x(t),h=d.render(d.props,d.state,d.context),P=0;P<d._sb.length;P++)d.__h.push(d._sb[P]);d._sb=[]}else do d.__d=!1,x&&x(t),h=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++b<25);d.state=d.__s,d.getChildContext!=null&&(i=ee(ee({},i),d.getChildContext())),f||d.getSnapshotBeforeUpdate==null||(w=d.getSnapshotBeforeUpdate(m,_)),Cn(e,Ge(T=h!=null&&h.type===k&&h.key==null?h.props.children:h)?T:[T],t,n,i,o,s,c,a,l,u),d.base=t.__e,t.__u&=-161,d.__h.length&&c.push(d),N&&(d.__E=d.__=null)}catch(D){t.__v=null,l||s!=null?(t.__e=a,t.__u|=l?160:32,s[s.indexOf(a)]=null):(t.__e=n.__e,t.__k=n.__k),I.__e(D,t,n)}else s==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=Hr(n.__e,t,n,i,o,s,c,l,u);(h=I.diffed)&&h(t)}function Dn(e,t,n){t.__d=void 0;for(var i=0;i<n.length;i++)gt(n[i],n[++i],n[++i]);I.__c&&I.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(s){s.call(o)})}catch(s){I.__e(s,o.__v)}})}function Hr(e,t,n,i,o,s,c,a,l){var u,h,d,f,m,_,w,N=n.props,v=t.props,p=t.type;if(p==="svg"?o="http://www.w3.org/2000/svg":p==="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),s!=null){for(u=0;u<s.length;u++)if((m=s[u])&&"setAttribute"in m==!!p&&(p?m.localName===p:m.nodeType===3)){e=m,s[u]=null;break}}if(e==null){if(p===null)return document.createTextNode(v);e=document.createElementNS(o,p,v.is&&v),s=null,a=!1}if(p===null)N===v||a&&e.data===v||(e.data=v);else{if(s=s&&we.call(e.childNodes),N=n.props||ye,!a&&s!=null)for(N={},u=0;u<e.attributes.length;u++)N[(m=e.attributes[u]).name]=m.value;for(u in N)if(m=N[u],u!="children"){if(u=="dangerouslySetInnerHTML")d=m;else if(u!=="key"&&!(u in v)){if(u=="value"&&"defaultValue"in v||u=="checked"&&"defaultChecked"in v)continue;Ne(e,u,null,m,o)}}for(u in v)m=v[u],u=="children"?f=m:u=="dangerouslySetInnerHTML"?h=m:u=="value"?_=m:u=="checked"?w=m:u==="key"||a&&typeof m!="function"||N[u]===m||Ne(e,u,m,N[u],o);if(h)a||d&&(h.__html===d.__html||h.__html===e.innerHTML)||(e.innerHTML=h.__html),t.__k=[];else if(d&&(e.innerHTML=""),Cn(e,Ge(f)?f:[f],t,n,i,p==="foreignObject"?"http://www.w3.org/1999/xhtml":o,s,c,s?s[0]:n.__k&&oe(n,0),a,l),s!=null)for(u=s.length;u--;)s[u]!=null&&In(s[u]);a||(u="value",_!==void 0&&(_!==e[u]||p==="progress"&&!_||p==="option"&&_!==N[u])&&Ne(e,u,_,N[u],o),u="checked",w!==void 0&&w!==e[u]&&Ne(e,u,w,N[u],o))}return e}function gt(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(i){I.__e(i,n)}}function it(e,t,n){var i,o;if(I.unmount&&I.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||gt(i,null,t)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(s){I.__e(s,t)}i.base=i.__P=null}if(i=e.__k)for(o=0;o<i.length;o++)i[o]&&it(i[o],t,n||typeof e.type!="function");n||e.__e==null||In(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function Fr(e,t,n){return this.constructor(e,n)}function Mn(e,t,n){var i,o,s,c;I.__&&I.__(e,t),o=(i=typeof n=="function")?null:t.__k,s=[],c=[],_t(t,e=(!i&&n||t).__k=ve(k,null,[e]),o||ye,ye,t.namespaceURI,!i&&n?[n]:o?null:t.firstChild?we.call(t.childNodes):null,s,!i&&n?n:o?o.__e:t.firstChild,i,c),Dn(s,e,c)}function jr(e,t,n){var i,o,s,c,a=ee({},e.props);for(s in e.type&&e.type.defaultProps&&(c=e.type.defaultProps),t)s=="key"?i=t[s]:s=="ref"?o=t[s]:a[s]=t[s]===void 0&&c!==void 0?c[s]:t[s];return arguments.length>2&&(a.children=arguments.length>3?we.call(arguments,2):n),fe(e.type,a,i||e.key,o||e.ref,null)}function q(e,t){var n={__c:t="__cC"+Tn++,__:e,Consumer:function(i,o){return i.children(o)},Provider:function(i){var o,s;return this.getChildContext||(o=[],(s={})[t]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(c){this.props.value!==c.value&&o.some(function(a){a.__e=!0,rt(a)})},this.sub=function(c){o.push(c);var a=c.componentWillUnmount;c.componentWillUnmount=function(){o.splice(o.indexOf(c),1),a&&a.call(c)}}),i.children}};return n.Provider.__=n.Consumer.contextType=n}we=Pn.slice,I={__e:function(e,t,n,i){for(var o,s,c;t=t.__;)if((o=t.__c)&&!o.__)try{if((s=o.constructor)&&s.getDerivedStateFromError!=null&&(o.setState(s.getDerivedStateFromError(e)),c=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,i||{}),c=o.__d),c)return o.__E=o}catch(a){e=a}throw e}},Nn=0,te.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=ee({},this.state),typeof e=="function"&&(e=e(ee({},n),this.props)),e&&ee(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),rt(this))},te.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),rt(this))},te.prototype.render=k,se=[],En=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,et=function(e,t){return e.__v.__b-t.__v.__b},$e.__r=0,ft=0,tt=Ot(!1),nt=Ot(!0),Tn=0;var ae,M,We,Bt,be=0,Rn=[],Me=[],R=I,Gt=R.__b,Ut=R.__r,zt=R.diffed,Ht=R.__c,Ft=R.unmount,jt=R.__;function ke(e,t){R.__h&&R.__h(M,e,be||t),be=0;var n=M.__H||(M.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:Me}),n.__[e]}function E(e){return be=1,Wr(Ln,e)}function Wr(e,t,n){var i=ke(ae++,2);if(i.t=e,!i.__c&&(i.__=[n?n(t):Ln(void 0,t),function(a){var l=i.__N?i.__N[0]:i.__[0],u=i.t(l,a);l!==u&&(i.__N=[u,i.__[1]],i.__c.setState({}))}],i.__c=M,!M.u)){var o=function(a,l,u){if(!i.__c.__H)return!0;var h=i.__c.__H.__.filter(function(f){return!!f.__c});if(h.every(function(f){return!f.__N}))return!s||s.call(this,a,l,u);var d=!1;return h.forEach(function(f){if(f.__N){var m=f.__[0];f.__=f.__N,f.__N=void 0,m!==f.__[0]&&(d=!0)}}),!(!d&&i.__c.props===a)&&(!s||s.call(this,a,l,u))};M.u=!0;var s=M.shouldComponentUpdate,c=M.componentWillUpdate;M.componentWillUpdate=function(a,l,u){if(this.__e){var h=s;s=void 0,o(a,l,u),s=h}c&&c.call(this,a,l,u)},M.shouldComponentUpdate=o}return i.__N||i.__}function A(e,t){var n=ke(ae++,3);!R.__s&&vt(n.__H,t)&&(n.__=e,n.i=t,M.__H.__h.push(n))}function yt(e,t){var n=ke(ae++,4);!R.__s&&vt(n.__H,t)&&(n.__=e,n.i=t,M.__h.push(n))}function Q(e){return be=5,Ue(function(){return{current:e}},[])}function Ue(e,t){var n=ke(ae++,7);return vt(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function z(e,t){return be=8,Ue(function(){return e},t)}function K(e){var t=M.context[e.__c],n=ke(ae++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(M)),t.props.value):e.__}function Vr(){for(var e;e=Rn.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Re),e.__H.__h.forEach(st),e.__H.__h=[]}catch(t){e.__H.__h=[],R.__e(t,e.__v)}}R.__b=function(e){M=null,Gt&&Gt(e)},R.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),jt&&jt(e,t)},R.__r=function(e){Ut&&Ut(e),ae=0;var t=(M=e.__c).__H;t&&(We===M?(t.__h=[],M.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=Me,n.__N=n.i=void 0})):(t.__h.forEach(Re),t.__h.forEach(st),t.__h=[],ae=0)),We=M},R.diffed=function(e){zt&&zt(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Rn.push(t)!==1&&Bt===R.requestAnimationFrame||((Bt=R.requestAnimationFrame)||Yr)(Vr)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==Me&&(n.__=n.__V),n.i=void 0,n.__V=Me})),We=M=null},R.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Re),n.__h=n.__h.filter(function(i){return!i.__||st(i)})}catch(i){t.some(function(o){o.__h&&(o.__h=[])}),t=[],R.__e(i,n.__v)}}),Ht&&Ht(e,t)},R.unmount=function(e){Ft&&Ft(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{Re(i)}catch(o){t=o}}),n.__H=void 0,t&&R.__e(t,n.__v))};var Wt=typeof requestAnimationFrame=="function";function Yr(e){var t,n=function(){clearTimeout(i),Wt&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,100);Wt&&(t=requestAnimationFrame(n))}function Re(e){var t=M,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),M=t}function st(e){var t=M;e.__c=e.__(),M=t}function vt(e,t){return!e||e.length!==t.length||t.some(function(n,i){return n!==e[i]})}function Ln(e,t){return typeof t=="function"?t(e):t}function qr(e,t){for(var n in t)e[n]=t[n];return e}function ot(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var i in t)if(i!=="__source"&&e[i]!==t[i])return!0;return!1}function Vt(e,t){this.props=e,this.context=t}function bt(e,t){function n(o){var s=this.props.ref,c=s==o.ref;return!c&&s&&(s.call?s(null):s.current=null),t?!t(this.props,o)||!c:ot(this.props,o)}function i(o){return this.shouldComponentUpdate=n,ve(e,o)}return i.displayName="Memo("+(e.displayName||e.name)+")",i.prototype.isReactComponent=!0,i.__f=!0,i}(Vt.prototype=new te).isPureReactComponent=!0,Vt.prototype.shouldComponentUpdate=function(e,t){return ot(this.props,e)||ot(this.state,t)};var Yt=I.__b;I.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Yt&&Yt(e)};var qt=function(e,t){return e==null?null:ne(ne(e).map(t))},Kr={map:qt,forEach:qt,count:function(e){return e?ne(e).length:0},only:function(e){var t=ne(e);if(t.length!==1)throw"Children.only";return t[0]},toArray:ne},Qr=I.__e;I.__e=function(e,t,n,i){if(e.then){for(var o,s=t;s=s.__;)if((o=s.__c)&&o.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),o.__c(e,t)}Qr(e,t,n,i)};var Kt=I.unmount;function $n(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(i){typeof i.__c=="function"&&i.__c()}),e.__c.__H=null),(e=qr({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map(function(i){return $n(i,t,n)})),e}function On(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(i){return On(i,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function Ve(){this.__u=0,this.t=null,this.__b=null}function Bn(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function Ee(){this.u=null,this.o=null}I.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),Kt&&Kt(e)},(Ve.prototype=new te).__c=function(e,t){var n=t.__c,i=this;i.t==null&&(i.t=[]),i.t.push(n);var o=Bn(i.__v),s=!1,c=function(){s||(s=!0,n.__R=null,o?o(a):a())};n.__R=c;var a=function(){if(!--i.__u){if(i.state.__a){var l=i.state.__a;i.__v.__k[0]=On(l,l.__c.__P,l.__c.__O)}var u;for(i.setState({__a:i.__b=null});u=i.t.pop();)u.forceUpdate()}};i.__u++||32&t.__u||i.setState({__a:i.__b=i.__v.__k[0]}),e.then(c,c)},Ve.prototype.componentWillUnmount=function(){this.t=[]},Ve.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=$n(this.__b,n,i.__O=i.__P)}this.__b=null}var o=t.__a&&ve(k,null,e.fallback);return o&&(o.__u&=-33),[ve(k,null,t.__a?null:e.children),o]};var Qt=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};(Ee.prototype=new te).__a=function(e){var t=this,n=Bn(t.__v),i=t.o.get(e);return i[0]++,function(o){var s=function(){t.props.revealOrder?(i.push(o),Qt(t,e,i)):o()};n?n(s):s()}},Ee.prototype.render=function(e){this.u=null,this.o=new Map;var t=ne(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},Ee.prototype.componentDidUpdate=Ee.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,n){Qt(e,n,t)})};var Gn=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Jr=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Xr=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Zr=/[A-Z0-9]/g,ei=typeof document<"u",ti=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function ni(e,t,n){return t.__k==null&&(t.textContent=""),Mn(e,t),typeof n=="function"&&n(),e?e.__c:null}te.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(te.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var Jt=I.event;function ri(){}function ii(){return this.cancelBubble}function si(){return this.defaultPrevented}I.event=function(e){return Jt&&(e=Jt(e)),e.persist=ri,e.isPropagationStopped=ii,e.isDefaultPrevented=si,e.nativeEvent=e};var oi={enumerable:!1,configurable:!0,get:function(){return this.class}},Xt=I.vnode;I.vnode=function(e){typeof e.type=="string"&&function(t){var n=t.props,i=t.type,o={};for(var s in n){var c=n[s];if(!(s==="value"&&"defaultValue"in n&&c==null||ei&&s==="children"&&i==="noscript"||s==="class"||s==="className")){var a=s.toLowerCase();s==="defaultValue"&&"value"in n&&n.value==null?s="value":s==="download"&&c===!0?c="":a==="translate"&&c==="no"?c=!1:a==="ondoubleclick"?s="ondblclick":a!=="onchange"||i!=="input"&&i!=="textarea"||ti(n.type)?a==="onfocus"?s="onfocusin":a==="onblur"?s="onfocusout":Xr.test(s)?s=a:i.indexOf("-")===-1&&Jr.test(s)?s=s.replace(Zr,"-$&").toLowerCase():c===null&&(c=void 0):a=s="oninput",a==="oninput"&&o[s=a]&&(s="oninputCapture"),o[s]=c}}i=="select"&&o.multiple&&Array.isArray(o.value)&&(o.value=ne(n.children).forEach(function(l){l.props.selected=o.value.indexOf(l.props.value)!=-1})),i=="select"&&o.defaultValue!=null&&(o.value=ne(n.children).forEach(function(l){l.props.selected=o.multiple?o.defaultValue.indexOf(l.props.value)!=-1:o.defaultValue==l.props.value})),n.class&&!n.className?(o.class=n.class,Object.defineProperty(o,"className",oi)):(n.className&&!n.class||n.class&&n.className)&&(o.class=o.className=n.className),t.props=o}(e),e.$$typeof=Gn,Xt&&Xt(e)};var Zt=I.__r;I.__r=function(e){Zt&&Zt(e),e.__c};var en=I.diffed;I.diffed=function(e){en&&en(e);var t=e.props,n=e.__e;n!=null&&e.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value)};function Un(e){return!!e&&e.$$typeof===Gn}function ai(e){return Un(e)?jr.apply(null,arguments):e}function ci(e){return!!e.__k&&(Mn(null,e),!0)}var li=0;function r(e,t,n,i,o,s){t||(t={});var c,a,l=t;if("ref"in l)for(a in l={},t)a=="ref"?c=t[a]:l[a]=t[a];var u={type:e,props:l,key:n,ref:c,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--li,__i:-1,__u:0,__source:o,__self:s};if(typeof e=="function"&&(c=e.defaultProps))for(a in c)l[a]===void 0&&(l[a]=c[a]);return I.vnode&&I.vnode(u),u}function di(e){return{render:function(t){ni(t,e)},unmount:function(){ci(e)}}}let zn="America/New_York";function ui(e){zn=e}function $(e){e=new Date(e||Date.now());const t={},n="2-digit";return Intl.DateTimeFormat("en-US",{timeZone:zn,hourCycle:"h23",year:"numeric",month:n,day:n,hour:n,minute:n,second:n}).formatToParts(e).forEach(i=>t[i.type]=i.value),{date:`${t.year}-${t.month}-${t.day}`,time:`${t.hour}:${t.minute}:${t.second}`}}function Y(e){if(e??(e=$()),(e.time??"1")>"03:00:00")return e.date??$().date;const t=new Date(`${e.date}T00:00:00`);return t.setDate(t.getDate()-1),$(t).date}function hi(e,t){const n=new Date(e+"T00:00:00"),i=n.toLocaleString("en-US",{month:"long",day:"numeric"});if(t==="short")return i;const o=Y();if(e===o)return`Today, ${i}`;const s=new Date(o);s.setDate(s.getDate()+1);const c=s.toISOString().split("T")[0];return e===c?`Tomorrow, ${i}`:`${n.toLocaleString("en-US",{weekday:"long"})}, ${i}`}function J(e){const t=e.split(":").slice(0,2).map(Number),n=t[0]>=12?"PM":"AM";return t[0]=t[0]%12||12,t.map(i=>String(i).padStart(2,"0")).join(":").replace(/^0/,"")+" "+n}function at(e){const[t,n]=e.slice(0,19).split("T");return{date:t,time:n}}function ue(e){const[t,n]=e.split(":").map(Number);return(t+17)%24*60+n}function _e(e){if(!Array.isArray(e))return[];const t=$().time.slice(0,5),n=e.findIndex(i=>i>=t);return n>=0?e.slice(n):[]}function ge(e){const t=new Date,[n,i,o]=e.split(":").map(Number);return t.setHours(n,i,o,0),t}function Ye(e){const t=ue($().time),n=[...e.keys()].map(o=>({time:o,minutes:ue(o)}));return n.reduce((o,s)=>s.minutes>t&&Math.abs(s.minutes-t)<Math.abs(o.minutes-t)?s:o,n[0]).time}const qe=e=>Array.isArray(e)?e.join("."):e,B={get(e){const t=localStorage.getItem(qe(e));try{return JSON.parse(t??"")}catch{return}},set(e,t){localStorage.setItem(qe(e),JSON.stringify(t))},delete(e){localStorage.removeItem(qe(e))},clear(){localStorage.clear()}},Ke=["bg1","auth"];class Hn extends Error{constructor(){super("Auth data missing or expired");C(this,"name","ReauthNeeded")}}class mi{constructor(){C(this,"onUnauthorized",()=>{})}getData(){try{const t=B.get(Ke);if(t){const{swid:n,accessToken:i,expires:o}=t,s=$(o),c=$();if(s.date>c.date||s.date===c.date&&s.time>c.time&&s.time>="17")return{swid:n,accessToken:i}}}catch(t){console.error(t)}throw this.deleteData(),new Hn}setData(t){B.set(Ke,t)}deleteData(){B.delete(Ke),setTimeout(this.onUnauthorized)}}const V=new mi,pi=8e3;async function Fn(e,t={}){const{params:n,data:i,timeout:o=pi,...s}=t;t=s,t.referrer||(t.referrer=""),t.credentials||(t.credentials="omit"),t.cache||(t.cache="no-store"),t.headers={...t.headers||{}},n&&Object.keys(n).length>0&&(e+=(e.includes("?")?"&":"?")+Object.entries(n).filter(([,u])=>u!=="").map(u=>u.map(encodeURIComponent).join("=")).join("&")),i&&(t.method||(t.method="POST"),t.headers={...t.headers,"Content-Type":"application/json"},t.body=JSON.stringify(i)),t.method||(t.method="GET");const c=new AbortController;t.signal=c.signal;const a=setTimeout(()=>c.abort(),o);let l;try{l=await fetch(e,t)}catch(u){return console.error(u),{ok:!1,status:0,data:null}}finally{clearTimeout(a)}return{ok:l.ok,status:l.status,data:(l.headers.get("Content-Type")||"").startsWith("application/json")?await l.json():{}}}class jn extends Error{constructor(){super(...arguments);C(this,"name","InvalidOrigin")}}class pe extends Error{constructor(n,i="Request failed"){super(`${i}: ${JSON.stringify(n)}`);C(this,"name","RequestError");this.response=n}}class ze{constructor(t){C(this,"resort");C(this,"origin");this.resort=t,this.origin=this.constructor.origins[this.resort.id]}static originToResortId(t){var o;const i=(o=Object.entries(this.origins).find(([,s])=>s===t))==null?void 0:o[0];if(i)return i;throw new jn(t)}async request(t){const{swid:n,accessToken:i}=V.getData(),o=this.origin+t.path,s=await Fn(o,{method:t.method,params:t.params,data:t.data,timeout:t.timeout,headers:{"Accept-Language":"en-US",Authorization:`BEARER ${i}`,"x-user-id":n}});if(s.status===401&&!t.ignoreUnauth)setTimeout(()=>V.deleteData());else{const{key:c}=t;if(s.ok&&(!c||s.data[c]))return{...s,data:c?s.data[c]:s.data}}throw new pe(s)}}C(ze,"origins",{WDW:"https://disneyworld.disney.go.com",DLR:"https://disneyland.disney.go.com"});const fi="modulepreload",_i=function(e){return"/bg1/"+e},tn={},Oe=function(t,n,i){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),c=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));o=Promise.all(n.map(a=>{if(a=_i(a),a in tn)return;tn[a]=!0;const l=a.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${u}`))return;const h=document.createElement("link");if(h.rel=l?"stylesheet":fi,l||(h.as="script",h.crossOrigin=""),h.href=a,c&&h.setAttribute("nonce",c),document.head.appendChild(h),l)return new Promise((d,f)=>{h.addEventListener("load",d),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${a}`)))})}))}return o.then(()=>t()).catch(s=>{const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s})},gi={48199:"Mr-Incredible",48200:"Mrs-Incredible",261227:"Nemo",339625:"Russell",339626:"Carl",364907:"Jack-Skellington",431014:"Princess-Tiana",431065:"Darth_Vader",15549505:"Rapunzel",15655408:"Default_SignedIn",15675686:"Crush",15831168:"Wall-E",16453979:"Merida",16726412:"Stormtrooper",16818199:"Violet",16869301:"Jack-Jack",17345357:"R2-D2",17345359:"C-3PO",17532220:"Bruce",17532224:"Green-Alien",17532227:"Kermit",17532228:"Sorcerer-Mickey",17577168:"Elsa",17577169:"Anna",17813977:"Olaf",17888784:"Yoda",18101167:"Captain-Mickey",18368743:"-Nick",18368747:"-Judy",18393706:"-Flash",18403761:"kion",18405224:"-Moana",18405236:"-Elena",19633995:"50th_Mickey",19633996:"50th_Minnie",90003819:"Alice",90003846:"Ariel",90003898:"Belle",90003967:"Buzz",90003976:"Captain-Hook",90004004:"Chesire-Cat",90004017:"Cinderella",90004068:"Daisy",90004076:"Dash",90004104:"Donald",90004228:"Goofy",90004260:"Hamm",90004328:"Princess-Jasmine",90004340:"Jiminy",90004395:"Lady",90004482:"Mickey-Mouse",90004486:"Minnie",90004537:"Mulan",90004605:"Peter-Pan",90004625:"Pluto",90004626:"Pocahontas",90004642:"Princess-Aurora",90004682:"Rex",90004772:"Snow-White",90004778:"Sparky",90004846:"TinkerBell",90004860:"Tramp",90004939:"Zero"},xt="https://cdn1.parksmedia.wdprapps.disney.com/resize/mwImage/1/90/90/75/dam/",yi=xt+"wdpro-assets/avatars/180x180/RetAvatar_180x180_",vi=xt+"wdpro-assets/avatars/180x180/RetAvatar-180x180",bi=xt+"disney-world/50th-anniversary/avatars/RetAvatar_180x180_",xi={"-":vi,5:bi};function Le(e){const t=gi[e||""];if(t)return(xi[t[0]]||yi)+t+".png"}const wi=(e,t,n)=>{const i=e[t];return i?typeof i=="function"?i():Promise.resolve(i):new Promise((o,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})},le=e=>`/das-vas/api/v1/${e}`;function ki(e){return{id:e.id,name:e.name.replace(/ \(Me\)$/,""),avatarImageUrl:Le(e.characterId),primary:e.primary}}class ct extends Error{constructor(n){super();C(this,"name","ConflictsError");this.conflicts=n}}class Ni extends Error{constructor(){super(...arguments);C(this,"name","NoPrimaryGuest")}}class Wn extends Error{constructor(){super(...arguments);C(this,"name","ExperienceUnavailable")}}var pt;class Ei extends ze{constructor(){super(...arguments);C(this,"bookingGuestId");Rt(this,pt)}async experiences(n){const i=encodeURIComponent(n.id),{data:o}=await this.request({path:le(`availability/parks/${i}/experiences`),key:"experiences"});return o.filter(s=>s.available&&!!s.nextAvailableTime).map(s=>{try{return{...s,...this.resort.experience(s.id)}}catch{return s}}).sort((s,c)=>s.name.localeCompare(c.name))}async parties(){const{swid:n}=V.getData(),{data:{bookingGuestId:i,parties:o}}=await this.request({path:le(`users/${encodeURIComponent(n)}/parties`)});return this.bookingGuestId=i,o.map(s=>[{...s.primaryGuest,primary:!0},...s.linkedGuests].map(ki))}async book({park:n,experience:i,guests:o}){var d,f;const s=await this.eligibility({park:n,experience:i,guests:o}),c=new Set((d=s.find(({type:m})=>m==="ELIGIBLE"))==null?void 0:d.guestIds);if(!o.every(m=>c.has(m.id)))throw new ct(Object.fromEntries(s.filter(m=>m.type!=="ELIGIBLE").flatMap(m=>m.guestIds.map(_=>[_,m.type]))));const a=await this.availability({park:n,experience:i}),l=(f=o.find(m=>m.primary))==null?void 0:f.id,u=new Map(o.map(m=>[m.id,m])),{data:h}=await this.request({path:le("bookings"),key:"booking",data:{bookingGuestId:this.bookingGuestId,primaryGuestId:l,guestIds:o.map(m=>m.id),experienceId:i.id,startTime:a}});return{type:"DAS",subtype:"IN_PARK",id:i.id,name:i.name,park:n,guests:h.entitlements.map(m=>{const _=u.get(m.guestId);return{id:m.guestId,name:(_==null?void 0:_.name)??"",avatarImageUrl:_==null?void 0:_.avatarImageUrl,entitlementId:m.id}}),start:at(h.startDateTime),end:{},bookingId:h.id}}async cancelBooking(n){const o=n.map(s=>s.entitlementId).map(encodeURIComponent).join(",");await this.request({path:le(`entitlements/${o}`),method:"DELETE"})}async eligibility({park:n,experience:i,guests:o}={}){const s=o.find(a=>!!a.primary);if(!s)throw new Ni;const{data:c}=await this.request({path:le("eligibility"),params:{experienceId:i.id,parkId:n.id,primaryGuestId:s.id,guestIds:o.map(a=>a.id).join(",")},key:"eligibility"});return c}async availability({park:n,experience:i}){const o=encodeURIComponent(i.id),s=encodeURIComponent(n.id),{data:{available:c,nextAvailableTime:a}}=await this.request({path:le(`availability/parks/${s}/experiences/${o}`),key:"experience"});if(!c||!a)throw new Wn;return a}}pt=new WeakMap;class Ti{constructor(t){C(this,"cachedShowtimes",{});this.resort=t}async shows(t){Object.keys(this.cachedShowtimes).length===0&&(this.cachedShowtimes=(await this.request("showtimes")).data);const n=this.cachedShowtimes[t.id]??{},{time:i}=$();return Object.fromEntries(Object.entries(n).flatMap(([o,s])=>{const c=s.filter(d=>d>=i).map(d=>J(d)),a=c[0],l=c.slice(1),u=a!==void 0,h=u?void 0:"NO_MORE_SHOWS";try{return[[o,{type:"ENTERTAINMENT",...this.resort.experience(o),park:t,standby:{available:u,unavailableReason:h,displayNextShowTime:a},displayAdditionalShowTimes:l}]]}catch(d){if(d instanceof ie)return[];throw d}}))}async request(t){const n=await Fn(`https://bg1.joelface.com/livedata/${this.resort.id.toLowerCase()}/${t}.json`);if(!n.ok)throw new Error("Fetch failed");return n}}const Pi=e=>e.sort((t,n)=>+n.primary-+t.primary||+n.preselected-+t.preselected||t.name.localeCompare(n.name)),Ii=e=>`/application/v1/guest/${e}`;class wt extends ze{async getQueues(){var n;const t=await this.post({resource:"getQueues"});if(!Array.isArray((n=t.data)==null?void 0:n.queues))throw new pe(t);return t.data.queues.filter(i=>!!i.categoryContentId).map(({queueId:i,tabContentId:o="",...s})=>{const c={...s,id:i};try{c.park=this.resort.park(o.split(";")[0])}catch(a){if(!(a instanceof ie))throw a}return c})}async getQueue(t){const n=(await this.getQueues()).find(i=>i.id===t.id);if(n)return n;throw new Error("Queue not Found")}async getLinkedGuests(t){const{data:n}=await this.post({resource:"getLinkedGuests",data:{queueId:t.id,requestType:"REVIEW"}});return Pi(n.guests.map(({guestId:i,firstName:o="",lastName:s="",isPrimaryGuest:c,isPreselected:a,avatarImageUrl:l})=>({id:i,name:`${o} ${s}`.trim(),primary:!!c,preselected:!!a,avatarImageUrl:l})))}async joinQueue(t,n){const i=n.map(c=>c.id),o=await this.post({resource:"joinQueue",data:{queueId:t.id,guestIds:i}}),{data:s}=o;if(s.responseStatus==="OK"){const c=s.positions.find(a=>a.queueId===t.id&&a.guestIds.length>0&&i.some(l=>a.guestIds.includes(l)));if(!c)throw new pe(o);return{boardingGroup:c.boardingGroup,conflicts:{},closed:!1}}else if(s.responseStatus==="INVALID_GUEST"||s.responseStatus==="CLOSED_QUEUE"){const c=s.responseStatus==="CLOSED_QUEUE",a=new Set,l={};for(const d of s.conflicts)for(const f of d.guestIds){const m=n.find(_=>_.id===f);m&&(l[m.id]=d.conflictType,a.add(f))}const u=n.filter(d=>!a.has(d.id));if(c||u.length===0)return{boardingGroup:null,conflicts:l,closed:c};const h=await this.joinQueue(t,u);return h.conflicts={...l,...h.conflicts},h}else throw new pe(o)}async post(t){try{return await this.request({...t,method:"data"in t?"POST":"GET",path:Ii(t.resource)})}catch(n){if(n instanceof pe){const i=n.response,{ok:o,status:s}=i;if(!o&&s<500&&s!==401)return i}throw n}}}C(wt,"origins",{WDW:"https://vqguest-svc-wdw.wdprapps.disney.com",DLR:"https://vqguest-svc.wdprapps.disney.com"});class ie extends Error{constructor(n){super(`Invalid ID: ${n}`);C(this,"name","InvalidId")}}class Vn{constructor(t,n){C(this,"parks");C(this,"genie");C(this,"vq");C(this,"das");C(this,"liveData");C(this,"parksById");C(this,"expsById");C(this,"dropExpsByPark");var i,o,s;this.id=t,this.parks=n.parks,this.parksById=Object.fromEntries(this.parks.map(c=>[c.id,c])),this.expsById=n.experiences,this.dropExpsByPark=new Map(this.parks.map(c=>[c,[]]));for(const[c,a]of Object.entries(this.expsById))a&&(a.id=c,a.park=a.land.park),a!=null&&a.dropTimes&&((i=this.dropExpsByPark.get(a.land.park))==null||i.push(a));for(const c of this.parks)c.dropTimes=[...new Set((o=this.dropExpsByPark.get(c))==null?void 0:o.flatMap(a=>a.dropTimes??[]))].sort(),(s=this.dropExpsByPark.get(c))==null||s.sort((a,l)=>a.name.localeCompare(l.name));this.genie=new qn(this),this.vq=new wt(this),this.das=new Ei(this),this.liveData=new Ti(this)}experience(t){const n=this.expsById[t];if(n)return n;throw n!==null&&console.warn(`Missing experience: ${t}`),new ie(t)}park(t){const n=this.parksById[t];if(n)return n;throw new ie(t)}dropExperiences(t){return this.dropExpsByPark.get(t)??[]}}async function Si(e){const t=await wi(Object.assign({"./data/dlr.ts":()=>Oe(()=>import("./dlr.js"),[]),"./data/wdw.ts":()=>Oe(()=>import("./wdw.js"),[])}),`./data/${e.toLowerCase()}.ts`,3);return new Vn(e,t)}const Ci={WDW:"wdw-itinerary-api",DLR:"dlr-itinerary-web-api"},Ai={WDW:{experience:"80010110",park:"80007944"},DLR:{experience:"353295",park:"330339"}},Di=new Set(["ACTIVITY","DINING"]),Te=e=>e.split(";")[0];function Yn(e){const{date:t,time:n}=$();return e.modifiable&&(t===e.end.date&&n<=(e.end.time??"")||t<(e.end.date??""))}class Mi extends Error{constructor(){super(...arguments);C(this,"name","ModifyNotAllowed")}}function nn(e){if(e&&!Yn(e))throw new Mi}class qn extends ze{constructor(n,i){super(n);C(this,"maxPartySize",12);C(this,"nextBookTime");C(this,"onUnauthorized",()=>{});C(this,"partyIds",new Set);C(this,"guestCache",new Map);C(this,"tracker");C(this,"primaryGuestId","");C(this,"convertGuest",n=>{const{id:i,firstName:o,lastName:s,characterId:c,...a}=n,l=`${o} ${s}`.trim();if(!this.guestCache.has(i))switch(n.ineligibleReason){case"INVALID_PARK_ADMISSION":case"PARK_RESERVATION_NEEDED":case"GENIE_PLUS_NEEDED":n.primary&&this.cacheGuest(i,l,c);break;default:this.cacheGuest(i,l,c)}const u=Le(c);return this.partyIds.size>0&&!this.partyIds.has(i)&&(a.ineligibleReason="NOT_IN_PARTY",delete a.eligibleAfter),{...a,id:i,name:l,avatarImageUrl:u}});this.tracker=i??new Ri}setPartyIds(n){this.partyIds=new Set(n)}async experiences(n){var o,s,c,a;await this.primeGuestCache();const{data:i}=await this.request({path:`/tipboard-vas/api/v2/parks/${encodeURIComponent(n.id)}/experiences`,params:{eligibilityGuestIds:[...this.guestCache.keys()].join(",")}});return this.nextBookTime=(a=(((c=(s=(o=i.eligibility)==null?void 0:o.geniePlusEligibility)==null?void 0:s[Y()])==null?void 0:c.flexEligibilityWindows)||[]).sort((l,u)=>l.time.time.localeCompare(u.time.time))[0])==null?void 0:a.time.time,i.availableExperiences.flatMap(l=>{try{return[{...l,...this.resort.experience(l.id),park:n,experienced:this.tracker.experienced(l)}]}catch(u){if(u instanceof ie)return[];throw u}})}async guests(n){var a;const i=Ai[this.resort.id],{data:o}=await this.request({path:"/ea-vas/api/v1/guests",params:{productType:"FLEX",experienceId:(n==null?void 0:n.id)??i.experience,parkId:((a=n==null?void 0:n.park)==null?void 0:a.id)??i.park}});this.primaryGuestId=o.primaryGuestId;const s=o.ineligibleGuests.map(this.convertGuest),c=o.guests.map(this.convertGuest).filter(l=>!("ineligibleReason"in l)||s.push(l)&&!1);return s.sort((l,u)=>{const h=+!l.primary-+!u.primary||l.name.localeCompare(u.name);return l.eligibleAfter||u.eligibleAfter?(l.eligibleAfter||"99").localeCompare(u.eligibleAfter||"99")||h:l.ineligibleReason===u.ineligibleReason?h:l.ineligibleReason==="NOT_IN_PARTY"?1:u.ineligibleReason==="NOT_IN_PARTY"||l.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"?-1:u.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"?1:h}),{eligible:c,ineligible:s}}async offer(n,i,o){nn(o);const{data:{offer:{id:s,date:c,startTime:a,endTime:l,status:u,changeStatus:h},eligibleGuests:d,ineligibleGuests:f}}=await this.request({path:o?"/ea-vas/api/v1/products/modifications/flex/offers":"/ea-vas/api/v2/products/flex/offers",method:"POST",data:{guestIds:((o==null?void 0:o.guests)??i).map(m=>m.id),ineligibleGuests:[],primaryGuestId:i.map(m=>m.id).sort((m,_)=>m.localeCompare(_))[0],parkId:n.park.id,experienceId:n.id,selectedTime:n.flex.nextAvailableTime,...o?{date:$().date,modificationType:n.id===o.id?"TIME":"EXPERIENCE"}:{}},userId:!1});return Oe(()=>import("./diu.js"),[]),{id:s,start:{date:c,time:a},end:{date:c,time:l},active:u==="ACTIVE",changed:h!=="NONE",guests:{eligible:(d||[]).map(this.convertGuest),ineligible:(f||[]).map(this.convertGuest)},experience:n}}async book(n,i,o){var m;nn(i);const s=(await Oe(async()=>{const{default:_}=await import("./diu.js");return{default:_}},[])).default,c=new Set((o??n.guests.eligible).map(_=>_.id)),{data:a}=await this.request({path:i?"/ea-vas/api/v2/products/modifications/flex/bookings":"/ea-vas/api/v2/products/flex/bookings",method:"POST",userId:!1,data:{offerId:n.id,...await s(n.id),...i?{date:$().date,modificationType:i.id===n.experience.id?"TIME":"EXPERIENCE",existingEntitlements:i.guests.filter(_=>c.has(_.id)).map(_=>({entitlementId:_.entitlementId,entitlementBookingId:_.bookingId})),guestIdsToExclude:i.guests.filter(_=>!c.has(_.id)).map(_=>_.id)}:{}},key:"booking"}),{singleExperienceDetails:{experienceId:l,parkId:u},entitlements:h,startDateTime:d,endDateTime:f}=a;return{type:"LL",subtype:"G+",...this.getBookingExperienceData(l,u),bookingId:(m=h[0])==null?void 0:m.id,start:at(d),end:at(f),cancellable:!0,modifiable:!1,guests:h.map(_=>{const w=this.guestCache.get(_.guestId);return{id:_.guestId,name:(w==null?void 0:w.name)||"",avatarImageUrl:Le(w==null?void 0:w.characterId),entitlementId:_.id}})}}async cancelBooking(n){const o=n.map(s=>s.entitlementId).map(encodeURIComponent).join(",");await this.request({path:`/ea-vas/api/v1/entitlements/${o}`,method:"DELETE",userId:!1})}async bookings(){const{swid:n}=V.getData(),i=$().date,o=Y(),s=Ci[this.resort.id],{data:{items:c=[],assets:a={},profiles:l={}}}=await this.request({path:`/plan/${s}/api/v1/itinerary-items/${n}?item-types=FASTPASS&item-types=DINING&item-types=ACTIVITY&item-types=VIRTUAL_QUEUE_POSITION`,params:{destination:this.resort.id,fields:"items,profiles,assets","guest-locators":n+";type=swid","guest-locator-groups":"MY_FAMILY","start-date":i,"show-friends":"false"},userId:!1,ignoreUnauth:!0}),u=p=>{const{name:y,avatarId:g,type:x}=l[p.id];return{id:Te(p.id),name:`${y.firstName} ${y.lastName}`.trim(),avatarImageUrl:Le(g),...x==="transactional"&&{transactional:!0}}},h=p=>{const y=a[p.asset],x=a[y.facility].location??"",b=this.getPark(x);b.name===""&&x&&(b.name=a[x].name);const P=new Date(p.startDateTime);return{type:"RES",subtype:p.type,id:Te(p.asset),park:b,name:y.name,start:$(P),guests:p.guests.map(u).sort((S,D)=>+(D.id===this.primaryGuestId)-+(S.id===this.primaryGuestId)||+!D.transactional-+!S.transactional||S.name.localeCompare(D.name)),bookingId:p.id}},d=p=>{const y=a[p.facility],g=new Set;return{...this.getBookingExperienceData(p.facility,y.location,y.name),start:(p.displayStartDate??i)<o?{date:o}:{date:p.displayStartDate??i,time:p.displayStartTime},end:{date:p.displayEndDate,time:p.displayEndTime},guests:p.guests.filter(x=>g.has(x.id)||x.redemptionsRemaining===0?!1:(g.add(x.id),!0)).map(x=>({...u(x),entitlementId:x.entitlementId,bookingId:x.bookingId,...x.redemptionsRemaining!==void 0&&{redemptions:Math.min(x.redemptionsRemaining,x.redemptionsAllowed??1)}})),bookingId:p.id}},f=p=>{const y={FLEX:"G+",STANDARD:"ILL",OTHER:"OTHER"},g=p.multipleExperiences?"MEP":y[p.kind];if(!g)return;const x=g==="G+";let b={type:"LL",subtype:g,...d(p),cancellable:p.cancellable&&x,modifiable:p.modifiable&&x,bookingId:p.id};if(b.modifiable=Yn(b),p.multipleExperiences){const P=p.assets.find(T=>T.original);P&&(b={...b,...this.getBookingExperienceData(P.content,a[P.content].location)}),b.choices=p.assets.filter(T=>!T.excluded&&!T.original).map(({content:T})=>{const{name:S,location:D}=a[T];return this.getBookingExperienceData(T,D,S)}).sort((T,S)=>T.name.localeCompare(S.name))}return b},m=p=>{const g={DAS:"IN_PARK",FDS:"ADVANCE"}[p.kind],x=g==="IN_PARK";return{type:"DAS",subtype:g,cancellable:p.cancellable&&x,...d(p)}},_=p=>{const y=a[p.asset],g=a[y.facility],x=this.getBookingExperienceData(y.facility,g.location,y.name);return x.park.name===""&&(x.park.name=g.name),{...x,type:"BG",boardingGroup:p.boardingGroup.id,status:p.status,start:$(new Date(p.startDateTime)),guests:p.guests.map(u),bookingId:p.id}},N={PARK_PASS:p=>{const y=this.getPark(a[p.facility].location);if(y)return{type:"APR",id:y.id,name:y.name,park:y,start:{date:p.displayStartDate,time:"06:00:00"},guests:p.guests.map(u),bookingId:p.id}},DAS:m,FDS:m},v=c.map(p=>{try{if(p.type==="FASTPASS")return(N[p.kind]??f)(p);if(p.type==="VIRTUAL_QUEUE_POSITION")return _(p);if(p.type&&Di.has(p.type))return h(p)}catch(y){console.error(y)}}).filter(p=>!!p);return this.tracker.update(v,this),v}getPark(n){n=Te(n);try{return this.resort.park(n)}catch(i){if(i instanceof ie)return{id:n,name:"",icon:"",geo:{n:0,s:0,e:0,w:0},theme:{bg:"bg-blue-500",text:"text-blue-500"},dropTimes:[]};throw i}}getBookingExperienceData(n,i,o="Experience"){n=Te(n);try{const s=this.resort.experience(n);return{id:n,name:s.name,park:s.park}}catch(s){if(s instanceof ie)return{id:n,name:o,park:this.getPark(i)};throw s}}async primeGuestCache(){this.primaryGuestId===""&&(this.primaryGuestId=".",await this.guests())}cacheGuest(n,i,o){this.guestCache.set(n,{name:i,characterId:o})}async request(n){if(n.userId??!0){const{swid:i}=V.getData();n={...n},n.params={...n.params,userId:i}}return super.request(n)}}const rn=["bg1","genie","bookings"];class Ri{constructor(){C(this,"date");C(this,"expIds",new Set);C(this,"experiencedExpIds",new Set);const{date:t=Y(),expIds:n=[],experiencedExpIds:i=[]}=B.get(rn)??{};this.date=t,this.expIds=new Set(n),this.experiencedExpIds=new Set(i),this.checkDate()}experienced(t){return this.experiencedExpIds.has(t.id)}async update(t,n){this.checkDate();const i=t.filter(s=>s.type==="LL"&&!!s.cancellable);for(const s of i)this.experiencedExpIds[s.modifiable?"delete":"add"](s.id);const o=this.expIds;this.expIds=new Set(i.map(s=>s.id));for(const s of o){if(this.expIds.has(s))continue;const{ineligible:c}=await n.guests({id:s}),a=c.some(l=>l.ineligibleReason==="EXPERIENCE_LIMIT_REACHED");this.experiencedExpIds[a?"add":"delete"](s)}B.set(rn,{date:this.date,expIds:[...this.expIds],experiencedExpIds:[...this.experiencedExpIds]})}checkDate(){const t=Y();this.date!==t&&(this.date=t,this.expIds=new Set,this.experiencedExpIds=new Set)}}const Kn=q(new Vn("WDW",{experiences:{},parks:[]})),Li=Kn.Provider,O=()=>K(Kn),Qn=q({goTo:()=>{},goBack:async()=>{}}),$i=Qn.Provider,G=()=>K(Qn),Jn=q({current:r("div",{})}),Oi=Jn.Provider,Xn=()=>K(Jn);let Bi=0;const sn=()=>++Bi,Pe=()=>Number(location.hash.slice(1))||0;let lt=()=>{};class Gi extends Promise{constructor(){super(t=>{lt=()=>{t(),lt=()=>{}}})}}function Zn({children:e}){const[t,n]=E({current:e}),i=Q([{elem:e,key:0}]),o=Q({goTo(c,a){let l=Pe(),u;a!=null&&a.replace?(u=i.current[l].key??sn(),n(h=>({...h,current:c}))):(i.current=i.current.slice(0,++l),location.hash=`#${l}`,u=sn()),i.current[l]={elem:c,key:u}},goBack({screen:c,props:a}={}){if(c){const l=Pe();for(let u=l-1;u>=0;--u)if(i.current[u].elem.type===c){if(history.go(u-l),a){const h={...i.current[u].elem.props,...a};i.current[u].elem=r(c,{...h})}break}}else history.back();return new Gi}});A(()=>{function c(){var u,h;lt();const l=Pe();l>=i.current.length?history.back():n({current:((u=i.current[l])==null?void 0:u.elem)??r("div",{}),prev:(h=i.current[l-1])==null?void 0:h.elem})}function a(l){l.preventDefault()}return location.replace("#0"),addEventListener("hashchange",c),addEventListener("beforeunload",a),()=>{removeEventListener("hashchange",c),removeEventListener("beforeunload",a)}},[]);const s=Math.min(Pe(),i.current.length-1);return r($i,{value:o.current,children:r(Oi,{value:t,children:i.current.slice(0,s+1).map(({elem:c,key:a},l)=>r("article",{hidden:l!==s,children:c},a))})})}const kt={bg:"bg-blue-500",text:"text-blue-500"},er=q(kt),tr=er.Provider,F=()=>K(er),Ui={normal:"py-1",small:"py-1.5 text-xs uppercase tracking-wide",full:"w-full py-3"};function L(e){const{goBack:t}=G(),{type:n,back:i,onClick:o,className:s,...c}=e;let a=`${Ui[n||"normal"]} ${s||""}`;const{bg:l}=F();return a.includes(" bg-")||(a+=` ${l} text-white`),r("button",{onClick:async()=>{o&&await o(),i&&(i===!0?t():t(i))},className:`${a} inline-flex items-center justify-center min-w-[36px] rounded-lg px-2 font-semibold disabled:opacity-50`,...c})}function W(e){return r("div",{children:r("div",{className:"fixed bottom-0 left-0 w-full p-5 text-center",children:r(L,{...e,className:"max-w-2xl mx-auto shadow-[0px_4px_8px_-1px_#0005]",type:"full"})})})}function j({children:e,className:t,title:n}){return t||(t=""),t.match(/\bw-\S+\s*/)||(t+=" w-4"),t.match(/\bh-\S+\s*/)||(t+=" h-auto"),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",className:`mx-auto ${t}`,role:"img",children:[n&&r("title",{children:n}),e]})}/**
 * Modified arrow-left2 icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function zi(e){return r(j,{...e,children:r("path",{d:"M0.293,7.337L7.333,0.297C7.723,-0.093 8.357,-0.093 8.747,0.297C9.137,0.687 9.137,1.321 8.747,1.711L3.414,7.044L15,7.044C15.552,7.044 16,7.492 16,8.044C16,8.596 15.552,9.044 15,9.044L3.414,9.044L8.747,14.377C9.137,14.767 9.137,15.401 8.747,15.791C8.357,16.181 7.723,16.181 7.333,15.791L0.293,8.751C0.102,8.561 0,8.307 0,8.044C0,7.781 0.102,7.527 0.293,7.337Z"})})}function Hi({title:e,subhead:t,children:n}){const{prev:i}=Xn(),{bg:o,text:s}=F();function c(a){return!Un(a)||typeof a.type=="string"?a:a.type===k?Kr.map(a.props.children,c):ai(a,{className:`bg-white bg-opacity-90 ${s} ${a.props.className||""}`})}return r("div",{className:`px-3 ext-lg text-white ${o}`,children:[r("div",{className:"flex justify-end gap-x-2 gap-y-1 min-h-[36px] py-2",children:[!!i&&r(L,{back:!0,className:"-my-2 -ml-3",title:"Go Back",children:r(zi,{})}),r("h1",{className:"flex-1 self-center py-1 text-xl font-semibold overflow-hidden whitespace-nowrap",children:e}),c(n)]}),t&&r("div",{className:"flex flex-col gap-y-1 pb-1",children:t})]})}function U({title:e,buttons:t,subhead:n,footer:i,theme:o,children:s,contentRef:c}){const a=F();return o??(o=a),r(tr,{value:o,children:r("div",{className:"fixed inset-0 flex flex-col",children:[r(Hi,{title:e,subhead:n,children:t}),r("div",{ref:c,className:"relative flex-1 overflow-auto px-3 pb-3",children:s}),i&&r("div",{className:`relative ${o.bg} text-white font-semibold`,children:i})]})})}const on=["bg1","disclaimer","accepted"],Fi={bg:"bg-red-600",text:"text-red-600"};function ji(){const[e,t]=E(!!B.get(on));return e?null:r(Wi,{onAccept:()=>{B.set(on,1),t(!0)}})}function Wi({onAccept:e}){return r(U,{title:"Warning!",theme:Fi,children:[r("p",{children:'Use at your own risk. BG1 is highly experimental, for demonstration purposes only, and provided "as is" without warranty of any kind. It is in no way endorsed by or associated with the Walt Disney Company and could stop working at any time for any reason. To ensure the intended experience, always use the official Disney app.'}),r(W,{onClick:e,children:"Accept"})]})}function nr(){return r(U,{title:"BG1 News",children:r("iframe",{src:"https://joelface.github.io/bg1/news.html",className:"absolute inset-0 w-full h-full"})})}const an=["bg1","news","version"];function Vi(e){const[t,n]=E(()=>{const i=Number(B.get(an));return Number.isInteger(i)?i:0});return t<e?r(k,{children:[r(nr,{}),r(W,{onClick:()=>{B.set(an,e),n(e)},children:"Close"})]}):null}function Nt(e){const t=()=>{document.hidden||e()};return document.addEventListener("visibilitychange",t),()=>{document.removeEventListener("visibilitychange",t)}}const Yi="https://cdn.registerdisney.go.com/v4/OneID.js",Qe="oneid-script",qi="oneid-wrapper",Ki="oneid-secure-responder";function Qi({resort:e,onLogin:t}){return A(()=>{let n=0;async function i(){if(!window.OneID){n=self.setTimeout(i,100);return}const o=navigator.userAgent.includes("Android")?"AND":"IOS",s=window.OneID.get({clientId:`TPR-${e.id}-LBSDK.${o}`,responderPage:"https://bg1.joelface.com/responder.html"});s.on("login",({token:c})=>{t({swid:c.swid,accessToken:c.access_token,expires:new Date(c.exp).getTime()})}),s.on("close",()=>{s.launchLogin()}),await s.init(),s.launchLogin()}if(!document.getElementById(Qe)){const o=document.createElement("script");o.id=Qe,o.src=Yi,document.head.appendChild(o)}return i(),()=>{var o;n&&clearTimeout(n);for(const s of[qi,Ki,Qe]){const c=document.getElementById(s);(o=c==null?void 0:c.parentNode)==null||o.removeChild(c)}}},[e,t]),r("div",{className:"fixed top-0 left-0 w-full h-full border-0"})}const rr=q([]),Ji=rr.Provider,ir=()=>K(rr);function Xi(){const{das:e}=O(),[t,n]=E([]);return A(()=>{e.parties().then(n)},[e]),t}const cn=["bg1","genie","park"],sr=q({park:{},setPark:()=>{}}),Zi=({value:e,children:t})=>r(sr.Provider,{value:e,children:t}),He=()=>K(sr);function es(){const e=O(),[t,n]=E(()=>{const i=e.parks[0],{id:o=i.id,date:s=""}=B.get(cn)??{};try{return s===Y()?e.park(o):i}catch(c){return c instanceof ie||console.error(c),i}});return A(()=>{B.set(cn,{id:t.id,date:Y()})},[t]),{park:t,setPark:n}}/**
 * Refresh icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Et({className:e}){return r(j,{className:e,children:r("path",{d:"M16 6h-6l2.243-2.243c-1.133-1.133-2.64-1.757-4.243-1.757s-3.109 0.624-4.243 1.757c-1.133 1.133-1.757 2.64-1.757 4.243s0.624 3.109 1.757 4.243c1.133 1.133 2.64 1.757 4.243 1.757s3.109-0.624 4.243-1.757c0.095-0.095 0.185-0.192 0.273-0.292l1.505 1.317c-1.466 1.674-3.62 2.732-6.020 2.732-4.418 0-8-3.582-8-8s3.582-8 8-8c2.209 0 4.209 0.896 5.656 2.344l2.343-2.344v6z"})})}function Tt(e){const{children:t,color:n="bg-black",className:i="",...o}=e;return r("div",{className:`fixed inset-0 z-10 flex items-center justify-center p-2 ${n} bg-opacity-75 ${i}`,...o,children:t})}function ts(){const{bg:e}=F();return r(Tt,{color:"bg-white",className:"pointer-events-none",children:r("div",{className:"w-[50px] mx-auto",children:r("div",{"aria-label":"Loading\u2026",className:`rounded-full p-[20%] ${e}`,children:r(Et,{className:"animate-spin w-full text-white"})})})})}const ns=3e3,rs={alert:"bg-yellow-200",error:"bg-red-200"};function or(){const[,e]=E(0),[t,n]=E(""),[i,o]=E("alert"),s=z((a,l)=>{n(a),o(l||"alert"),e(u=>(clearTimeout(u),a?self.setTimeout(()=>{n("")},ns):u))},[]);return[t?r(is,{message:t,type:i}):null,s]}function is({message:e,type:t}){return e?r("div",{role:"alert",className:`fixed bottom-20 left-0 w-full p-2 font-semibold text-center ${rs[t]} text-gray-800`,children:e}):null}async function ss(e){return new Promise(t=>{setTimeout(t,e)})}const os=500;function X(){const[e,t]=E(0),[n,i]=or(),o=z(async(c,a={})=>{var _;const{messages:l={},minLoadTime:u=os}=a,h={error:"Unknown error occurred",request:"Network request failed",...l};i("");let d=[""];function f(...w){d=w}t(w=>w+1);const m=ss(u);try{await c(f)}catch(w){const N=(_=w==null?void 0:w.response)==null?void 0:_.status;h[w.name]!==void 0?f(h[w.name],"error"):Number.isInteger(N)?f(N in h?h[N]:h.request,"error"):(console.error(w),f(h.error,"error"))}await m,t(w=>w-1),i(...d)},[i]),s=e>0||n?r(k,{children:[e>0&&r(ts,{}),n]}):null;return{loadData:o,loaderElem:s,flash:i}}function ar(e){const[,t]=E(0);return z((n=0)=>{t(i=>Date.now()-i<n?i:(e(),Date.now()))},[e])}const cr=q({plans:[],refreshPlans:()=>{},loaderElem:null}),as=cr.Provider,me=()=>K(cr);function cs(){const{genie:e}=O(),{loadData:t,loaderElem:n}=X(),[i,o]=E([]),s=ar(z(()=>{t(async()=>{o(await e.bookings())})},[e,t]));return A(s,[s]),{plans:i,refreshPlans:s,loaderElem:n}}const lr=q({current:void 0,begin:()=>{},end:()=>{}}),ls=lr.Provider,ce=()=>K(lr),ds=()=>{const[e,t]=E({current:void 0,begin:n=>{t({...e,current:n})},end:()=>{t(n=>n.current?{...n,current:void 0}:n)}});return e},dr=q({tabs:[],active:{name:"",icon:r("div",{}),component:()=>null},changeTab:()=>{},scrollPos:{get:()=>0,set:()=>{}}}),ur=()=>K(dr);function us({name:e,icon:t}){const n=F(),{active:i,changeTab:o}=ur();if(!o)return null;const c=(i==null?void 0:i.name)===e?`bg-white bg-opacity-90 ${n.text}`:`${n.bg} text-white`;return r("button",{className:"px-4 py-2",onClick:()=>o(e),children:[r("div",{className:`min-w-[3rem] rounded-full py-1.5 ${c}`,children:t}),r("div",{className:"mt-0.5 text-sm",children:e})]})}function Pt({title:e,buttons:t,subhead:n,children:i,contentRef:o}){const{tabs:s,scrollPos:c,footer:a}=ur();let l=Q(null);return o&&(l=o),yt(()=>{const u=l.current;if(!u)return;u.scroll(0,c.get());const h=()=>c.set(u.scrollTop);return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)},[c]),r(U,{title:e,buttons:t,subhead:n,footer:r(k,{children:[r("div",{className:"flex items-center justify-center",children:s.map(u=>ve(us,{...u,key:u.name}))}),a]}),contentRef:l,children:i})}function hs({tabs:e,footer:t},n){return function i({tabName:o}){const{goTo:s}=G(),c=z(u=>{u!==o&&s(r(i,{tabName:u}),{replace:!0})},[o,s]),a=Q(Object.fromEntries(e.map(u=>[u.name,0]))),l=e.find(({name:u})=>u===o);return l?r(dr.Provider,{value:{tabs:e,active:l,changeTab:c,scrollPos:{get:()=>a.current[l.name],set:u=>{a.current[l.name]=u}},footer:t},children:r(n,{tab:l})}):null}}const hr=q({experiences:[],refreshExperiences:()=>{},park:{},setPark:()=>null,loaderElem:null}),ms=hr.Provider,Fe=()=>K(hr);function ps(){const{genie:e,liveData:t}=O(),{park:n,setPark:i}=He(),{loadData:o,loaderElem:s}=X(),[c,a]=E([]),l=ar(z(()=>{o(async()=>{const u=t.shows(n);let h={...Object.fromEntries((await e.experiences(n)).map(d=>[d.id,d]))};try{h={...await u,...h}}catch(d){console.error(d)}a(Object.values(h))})},[n,e,t,o]));return A(l,[l]),{experiences:c,park:n,refreshExperiences:l,loaderElem:s,setPark:u=>{i(u),a([])}}}/**
 * Calendar icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function mr({className:e}){return r(j,{className:e,children:r("path",{d:"M5 6h2v2h-2zM8 6h2v2h-2zM11 6h2v2h-2zM2 12h2v2h-2zM5 12h2v2h-2zM8 12h2v2h-2zM5 9h2v2h-2zM8 9h2v2h-2zM11 9h2v2h-2zM2 9h2v2h-2zM13 0v1h-2v-1h-7v1h-2v-1h-2v16h15v-16h-2zM14 15h-13v-11h13v11z"})})}/**
 * Clock icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function fs(e){return r(j,{...e,children:r("path",{d:"M10.293 11.707l-3.293-3.293v-4.414h2v3.586l2.707 2.707zM8 0c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8-3.582-8-8-8zM8 14c-3.314 0-6-2.686-6-6s2.686-6 6-6c3.314 0 6 2.686 6 6s-2.686 6-6 6z"})})}/**
 * Power icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function dt(e){return r(j,{...e,children:r("path",{d:"M6 0l-6 8h6l-4 8 14-10h-8l6-6z"})})}/**
 * Checkmark icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function ln({className:e}){return r(j,{className:e,children:r("path",{d:"M13.5 2l-7.5 7.5-3.5-3.5-2.5 2.5 6 6 10-10z"})})}/**
 * Arrow-down icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function dn(e){return r(j,{...e,children:r("path",{d:"M8 15.5l7.5-7.5h-4.5v-8h-6v8h-4.5z"})})}/**
 * Star icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function _s(e){return r(j,{...e,children:r("path",{d:"M16 6.204l-5.528-0.803-2.472-5.009-2.472 5.009-5.528 0.803 4 3.899-0.944 5.505 4.944-2.599 4.944 2.599-0.944-5.505 4-3.899z"})})}function re({date:e,time:t,type:n,...i}){return r("time",{...i,dateTime:e||t,children:e?hi(e,n):t?J(t):""})}function pr({start:e,end:t}){const n=Y(e),i=Y(t);return t?r(k,{children:[e.time?r(re,{time:e.time}):r("span",{children:"Park Open"})," \u2013"," ",i>n?r(re,{date:i,type:"short"}):t.time?r(re,{time:t.time}):r("span",{children:"Park Close"})]}):r(re,{time:e.time})}const un=r("span",{"aria-hidden":!0,children:"\u2022"});function fr({booking:e,button:t}){const n=F();return r("div",{className:"flex items-center gap-x-3",children:[r("div",{className:"flex-1 min-w-0",children:[r("div",{className:"flex items-center gap-x-2 text-gray-500 text-sm font-semibold uppercase whitespace-nowrap",children:[e.type==="DAS"&&r(k,{children:[r("span",{children:"DAS"}),un]}),e.type==="BG"?r(k,{children:[r("span",{children:["BG ",e.boardingGroup]}),e.status==="SUMMONED"&&r(k,{children:[un,r("span",{className:`${n.text} font-bold`,children:"Board Now"})]})]}):r(pr,{...e})]}),r("div",{className:"text-lg font-semibold leading-snug truncate",children:e.choices?"Multiple Experiences":e.name})]}),t&&r("div",{children:t})]})}function _r(){const e=ce(),t=F();return e.current?r("div",{className:`${t.bg}`,children:r("div",{className:"-mx-3 pb-3 bg-white text-black",children:[r("div",{className:`pb-1 ${t.bg} text-white text-sm font-semibold uppercase text-center`,children:"Modifying Reservation"}),r("div",{className:"mt-2 px-3",children:r(fr,{booking:e.current,button:r(L,{type:"small",back:{screen:he},onClick:e.end,children:"Keep"})})})]})}):null}function H({guests:e,selectable:t,conflicts:n}){return e.length===0?null:r("ul",{className:"mt-2",children:e.map(i=>{var o;return r("li",{className:"px-3 py-1",children:r("label",{className:"flex items-center",children:[t&&r("input",{type:"checkbox",checked:t.isSelected(i),onChange:()=>t.onToggle(i),className:"mr-3"}),r("span",{className:"w-[48px] h-[48px] leading-[48px] mr-3 rounded-full text-3xl font-bold text-center bg-gray-400 text-white",children:i.avatarImageUrl?r("img",{src:i.avatarImageUrl,alt:"",width:"48",height:"48",className:"rounded-full"}):r("span",{"aria-hidden":"true",children:i.name[0]})}),r("span",{className:"leading-tight",children:[i.name,(n==null?void 0:n[i.id])&&r("span",{className:"block text-xs font-semibold text-red-700 uppercase",children:(o=n[i.id])==null?void 0:o.replace(/_/g," ")})]})]})},i.id)})})}const gr=["bg1","genie","partyIds"];function yr(){const e=B.get(gr)??[];return Array.isArray(e)?e:[]}function gs(){const{genie:e}=O();A(()=>e.setPartyIds(yr()),[e])}function ys(){const{genie:e}=O(),{loadData:t,loaderElem:n}=X(),[i,o]=E(!0),[s,c]=E(),[a,l]=E(()=>{const m=new Set(yr());return o(m.size===0),m});function u(){const m=[...a];B.set(gr,m),e.setPartyIds(m)}A(()=>{t(async()=>{const m=await e.guests();c([...m.eligible,...m.ineligible].sort((_,w)=>+!_.primary-+!w.primary||_.name.localeCompare(w.name)))})},[e,t]),A(()=>{i&&l(new Set)},[i]);const h=s==null?void 0:s.filter(m=>a.has(m.id)),d=s==null?void 0:s.filter(m=>!a.has(m.id)),f=m=>r("li",{children:r("label",{className:"flex items-center mt-2",children:[r("input",{type:"radio",name:"auto",onChange:()=>o(m.auto),checked:i===m.auto,className:"mr-2"})," ",m.children]})});return r(U,{title:"Party Selection",children:[r("p",{children:"By default, all eligible guests (up to a maximum of 12) are automatically selected when you book a Lightning Lane. If you would like to limit who you book for, you can manually select your party here."}),r("ul",{children:[r(f,{auto:!0,children:"Book for all eligible guests"}),r(f,{auto:!1,children:"Only book for selected guests"})]}),i?null:(s==null?void 0:s.length)===0?r("p",{className:"text-red-700",children:"No guests to select"}):h&&d?r(k,{children:[h.length>0&&r(k,{children:[r("h3",{children:"Your Party"}),r(H,{guests:h,selectable:{isSelected:()=>!0,onToggle:m=>{const _=new Set(a);_.delete(m.id),l(_)}}})]}),d.length>0&&r(k,{children:[r("h3",{children:"Add to Your Party"}),r(H,{guests:d,selectable:{isSelected:()=>!1,onToggle:m=>{const _=new Set(a);_.add(m.id),l(_)}}})]})]}):null,n,r(W,{back:!0,disabled:!i&&a.size===0,onClick:u,children:"Save"})]})}function je({name:e,onClick:t,...n}){return r(L,{...n,title:`Refresh ${e}`,onClick:t,children:r(Et,{})})}var Ie=function(e){return console.warn("[react-screen-wake-lock]: "+e)},vs=function(e){var t=e===void 0?{}:e,n=t.onError,i=t.onRequest,o=t.onRelease,s=E(),c=s[0],a=s[1],l=Q(null),u=typeof window<"u"&&"wakeLock"in navigator,h=z(function(f){f===void 0&&(f="screen");try{var m=l.current!=null;if(!u)return Promise.resolve(Ie("Calling the `request` function has no effect, Wake Lock Screen API isn't supported"));if(m)return Promise.resolve(Ie("Calling `request` multiple times without `release` has no effect"));var _=function(w,N){try{var v=Promise.resolve(navigator.wakeLock.request(f)).then(function(p){l.current=p,l.current.onrelease=function(y){a(l.current&&l.current.released||!0),o&&o(y),l.current=null},i&&i(),a(l.current&&l.current.released||!1)})}catch(p){return N(p)}return v&&v.then?v.then(void 0,N):v}(0,function(w){n&&n(w)});return Promise.resolve(_&&_.then?_.then(function(){}):void 0)}catch(w){return Promise.reject(w)}},[u,i,n,o]),d=z(function(){try{return Promise.resolve(u?l.current==null?Ie("Calling `release` before `request` has no effect."):l.current?Promise.resolve(l.current.release()).then(function(f){}):void 0:Ie("Calling the `release` function has no effect, Wake Lock Screen API isn't supported"))}catch(f){return Promise.reject(f)}},[u]);return{isSupported:u,request:h,released:c,release:d,type:l.current&&l.current.type||void 0}};const vr=q({eligible:[],ineligible:[],selected:[],setSelected:()=>null,experience:{name:"",park:{name:"",theme:{bg:"",text:""}}}}),br=vr.Provider,xr=()=>K(vr),bs="https://bg1.joelface.com/ping";async function It(e,t){const{date:n}=$(),i=["bg1","ping",e.id,t];if(B.get(i)===n)return;const{ok:s}=await fetch(bs,{method:"POST",body:new URLSearchParams({resort:e.id,service:t})});s&&B.set(i,n)}function xs(e){return r(j,{...e,children:r("path",{d:"M 5.5253906 0.9296875 L 3.4042969 3.0507812 L 8.3535156 8 L 3.4042969 12.949219 L 5.5253906 15.070312 L 10.474609 10.121094 L 12.595703 8 L 10.474609 5.8789062 L 5.5253906 0.9296875 z"})})}function wr(e){return r("div",{className:`mt-4 border-2 rounded border-green-600 p-1 font-semibold text-center text-green-600 bg-green-100 ${e.className}`,children:e.children})}function ws({bg:e,experiences:t,heading:n}){return r("div",{className:`mt-4 rounded ${e}`,children:[r("h3",{className:"mt-0 p-1 text-white text-center",children:n}),r("ul",{className:"list-disc py-2 pl-8 bg-white bg-opacity-90",children:t.map(i=>r("li",{children:i.name},i.id))})]})}function St({start:e,end:t}){return r("div",{className:"mt-4 text-lg",children:[t?"Arrive by":"Reservation at",":"," ",r("span",{className:"pl-1 font-semibold",children:r(pr,{start:e,end:t})})]})}function ks({booking:e,onCancel:t,dasGuest:n}){const{genie:i,das:o}=O(),s=e.type==="DAS"?o:i,{refreshPlans:c}=me(),[a,l]=E(new Set),{loadData:u,loaderElem:h}=X(),{name:d,park:f,guests:m}=e,_=a.size===0,w=a.size===m.length;async function N(){_||(await u(async()=>{await s.cancelBooking([...a]),c()}),t(m.filter(v=>!a.has(v))))}return r(U,{title:"Cancel Guests",theme:f.theme,children:[r("h2",{children:d}),r("div",{children:f.name}),r(St,{...e}),r("div",{className:"ml-3",children:r("label",{className:"flex items-center py-4",children:[r("input",{type:"checkbox",checked:w,onChange:()=>l(new Set(w?[]:m))}),r("span",{className:"ml-3",children:"Select All"})]})}),!_&&r("div",{className:"mb-4",children:[r("h3",{children:"Cancel These Guests"}),r(H,{guests:m.filter(v=>a.has(v)),selectable:{isSelected:()=>!0,onToggle:v=>{if(n&&v!==n&&a.has(n))l(new Set);else{const p=new Set(a);p.delete(v),l(p)}}}})]}),!w&&r("div",{children:[r("h3",{children:"Select Guests to Cancel"}),r(H,{guests:m.filter(v=>!a.has(v)),selectable:{isSelected:()=>!1,onToggle:v=>{l(new Set(v===n?m:a).add(v))}}})]}),r(W,{back:!0,disabled:_,onClick:N,children:"Cancel "+(w?"Reservation":"Guests")}),h]})}function xe({booking:e,isNew:t}){var x;const{goTo:n,goBack:i}=G(),{setPark:o}=He(),s=O(),c=ir(),{name:a,park:l,choices:u,type:h,subtype:d,start:f}=e,m=h==="DAS"&&d==="IN_PARK"?e.guests.find(b=>c.find(P=>P[0].id===b.id)):void 0,_=ce(),[w,N]=E(e.cancellable&&(h!=="DAS"||m)?e.guests:void 0),v=new Map([[l,[]],...s.parks.map(b=>[b,[]])]);for(const b of u||[])(x=v.get(b.park))==null||x.push(b);const p=[...v].filter(([,b])=>b.length>0).map(([b])=>b),y=(u?p.length===1?p[0]:{}:l).theme??kt;return r(U,{title:"Your "+{LL:"Lightning Lane",DAS:"DAS Selection",BG:"Boarding Group",APR:"Park Pass",RES:"Reservation"}[h],theme:y,buttons:e.modifiable&&r(L,{onClick:()=>{_.begin(e),o(e.park),i({screen:he,props:{tabName:"Genie+"}})},children:"Modify"}),children:[r("div",{className:`-mx-3 px-2 py-1 text-center ${y.bg} text-white text-sm font-semibold uppercase`,children:r(re,{date:Y(f)})}),u?r("h2",{children:"Multiple Experiences"}):r(k,{children:[r("h2",{children:a}),l.name&&r("div",{children:l.name})]}),h==="BG"?r(k,{children:[e.status==="SUMMONED"&&r(wr,{children:"Your boarding group has been called"}),r("h3",{children:["Boarding Group:"," ",r("span",{className:"ml-1 font-semibold",children:e.boardingGroup})]}),r("p",{children:"Check the official Disney app for return time and other virtual queue information."})]}):r(St,{...e}),u&&r(k,{children:[r("p",{children:[r("b",{children:a})," was temporarily unavailable during your return time. You may redeem this Lightning Lane at one of these replacement experiences:"]}),[...v].filter(([,b])=>b.length>0).map(([b,P])=>r(ws,{heading:b.name,experiences:P,bg:b.theme.bg},b.id))]}),r("div",{className:"flex mt-4",children:[r("h3",{className:"inline mt-0",children:"Your Party"}),e.cancellable&&w&&r(L,{type:"small",onClick:()=>{n(r(ks,{booking:{...e,guests:w},dasGuest:m,onCancel:b=>{b.length>0?N(b):i()}}))},className:"ml-3",children:"Cancel"})]}),r(H,{guests:w||e.guests,conflicts:Object.fromEntries(e.type==="LL"?e.guests.filter(b=>(b.redemptions??1)!==1).map(b=>[b.id,`Redemptions left: ${b.redemptions}`]):[])}),t&&r(W,{onClick:()=>i({screen:he,props:{tabName:"Plans"}}),children:"Show Plans"})]})}function kr({...e}){const{plans:t,refreshPlans:n,loaderElem:i}=me();return r(Pt,{title:"Your Plans",buttons:r(je,{name:"Plans",onClick:n}),theme:kt,...e,children:[r(Ns,{plans:t}),i]})}const Ns=bt(function({plans:t}){var l,u;const{goTo:n}=G(),i=F();function o(h){n(r(xe,{booking:h}))}const s=new Map,c=new Map;for(const h of t){const d=Y(h.start);s.has(d)||s.set(d,[]),h.type!=="APR"&&((l=s.get(d))==null||l.push(h)),c.has(d)||c.set(d,new Set),(h.type!=="LL"||h.subtype!=="MEP")&&h.park.icon&&((u=c.get(d))==null||u.add(h.park))}const a=r("p",{className:"font-semibold text-center uppercase text-gray-500",children:"No existing plans"});return r("ul",{children:t.length>0?[...s].map(([h,d])=>r("li",{children:[r("div",{className:"sticky top-0 -mx-3 pt-1 bg-white",children:r("div",{className:"flex items-center",children:[r("h2",{className:`flex-1 mt-0 rounded-r-full px-3 py-1 ${i.bg} text-white text-sm uppercase`,children:r(re,{date:h})}),r("ul",{className:"px-3 pl-2 text-lg text-right",children:[...c.get(h)??[]].map(f=>r("li",{className:"inline ml-1 first:ml-0","aria-label":f.name,children:f.icon},f.id))})]})}),d.length>0?r("ul",{className:d.length===0?"mt-3":"",children:d.map(f=>r("li",{className:"py-2.5 first:border-0 border-t-4 border-gray-300",onClick:()=>o(f),children:r(fr,{booking:f,button:r("button",{className:i.text,title:"More Info",children:r(xs,{})})})},f.bookingId))}):a]},h)):a})});function Es({...e}){const{goTo:t}=G();return r(k,{children:r(L,{...e,onClick:()=>t(r(kr,{})),title:"Plans",children:r(mr,{})})})}const Ts="_SELECT_RADIO_BUTTON_";function Be(e){const{options:t,selected:n,title:i,onChange:o,disabled:s,...c}=e,{bg:a}=F(),[l,u]=E(!1),[h,d]=E(0),f=Q(null),m=Q(null);yt(()=>{var T;if((T=t.values().next().value)!=null&&T.icon)return;const g=f.current,x=g==null?void 0:g.firstChild;if(!x)return;const b=x.nodeValue;if(!b)return;let P=0;for(const S of t.values())x.nodeValue=S.text,P=Math.max(g.offsetWidth,P);x.nodeValue=b,d(P)},[t]);const _=()=>{var g;return(g=m.current)==null?void 0:g.querySelector("input:checked")};A(()=>{var b;if(!l)return;const g=_();(b=g==null?void 0:g.closest("li"))==null||b.scrollIntoView(),g==null||g.focus();const x=P=>{var T;(T=m.current)!=null&&T.contains(P.target)||u(!1)};return addEventListener("focusin",x),()=>removeEventListener("focusin",x)},[l]);const w=()=>{const g=_();if(g){const x=g.value,b=t.get(x);b&&o(b.value??x)}u(!1)},N=n?t.get(n):i!==void 0?{text:i}:void 0;if(!N)return null;const{icon:v,text:p}=N;let y=!1;return r(k,{children:[r(L,{...c,title:v?`${i}: ${p}`:i,disabled:s||t.size===0,onClick:()=>u(!0),children:[v||r("span",{className:"flex-1 truncate",style:{minWidth:`${h}px`},ref:f,children:p}),r(j,{className:"w-2.5 ml-2 shrink-0",children:r("path",{d:"m6.8273 12.401-5.6333-7.7812a1.0212 1.0212 117.05 0 1 0.82716-1.62l11.958-2e-7a1.0212 1.0212 62.952 0 1 0.82714 1.62l-1.6438 2.2705a79984 79984 125.9 0 0-2.3456 3.2401l-1.6437 2.2706a1.4479 1.4479 180 0 1-2.3456 4.4e-5z"})})]}),l&&r(Tt,{onChange:()=>{y||w(),y=!1},onClick:g=>{var x;y||(!((x=m.current)!=null&&x.contains(g.target))||n&&g.target.value===n)&&(u(!1),g.preventDefault())},onKeyDown:({key:g})=>{["Enter"," "].includes(g)?w():g.startsWith("Arrow")&&(y=!0)},"data-testid":"shade",children:r("div",{className:"flex flex-col min-w-[50%] max-h-[90%] rounded-lg bg-white text-black",children:[i&&r("h3",{className:`mt-0 rounded-t-lg px-2 py-1 ${a} text-white font-semibold text-center`,children:i}),r("ul",{className:"overflow-auto",ref:m,children:[...t].map(([g,x])=>r("li",{className:"border-t-2 first:border-0 border-gray-300",children:r("label",{className:"flex flex-row items-center gap-x-2.5 px-4 py-3",children:[r("input",{type:"radio",name:Ts,value:g,defaultChecked:g===n,className:"w-4 h-4 shrink-0"})," ",x.icon&&r("span",{"aria-hidden":"true",children:x.icon})," ",x.text]})},x.text))})]})})]})}const Se=new Map([["07:00:00",{text:"7:00 AM"}],["07:15:00",{text:"7:15 AM"}],["07:30:00",{text:"7:30 AM"}],["07:45:00",{text:"7:45 AM"}],["08:00:00",{text:"8:00 AM"}],["08:15:00",{text:"8:15 AM"}],["08:30:00",{text:"8:30 AM"}],["08:45:00",{text:"8:45 AM"}],["09:00:00",{text:"9:00 AM"}],["09:15:00",{text:"9:15 AM"}],["09:30:00",{text:"9:30 AM"}],["09:45:00",{text:"9:45 AM"}],["10:00:00",{text:"10:00 AM"}],["10:15:00",{text:"10:15 AM"}],["10:30:00",{text:"10:30 AM"}],["10:45:00",{text:"10:45 AM"}],["11:00:00",{text:"11:00 AM"}],["11:15:00",{text:"11:15 AM"}],["11:30:00",{text:"11:30 AM"}],["11:45:00",{text:"11:45 AM"}],["12:00:00",{text:"12:00 PM"}],["12:15:00",{text:"12:15 PM"}],["12:30:00",{text:"12:30 PM"}],["12:45:00",{text:"12:45 PM"}],["13:00:00",{text:"1:00 PM"}],["13:15:00",{text:"1:15 PM"}],["13:30:00",{text:"1:30 PM"}],["13:45:00",{text:"1:45 PM"}],["14:00:00",{text:"2:00 PM"}],["14:15:00",{text:"2:15 PM"}],["14:30:00",{text:"2:30 PM"}],["14:45:00",{text:"2:45 PM"}],["15:00:00",{text:"3:00 PM"}],["15:15:00",{text:"3:15 PM"}],["15:30:00",{text:"3:30 PM"}],["15:45:00",{text:"3:45 PM"}],["16:00:00",{text:"4:00 PM"}],["16:15:00",{text:"4:15 PM"}],["16:30:00",{text:"4:30 PM"}],["16:45:00",{text:"4:45 PM"}],["17:00:00",{text:"5:00 PM"}],["17:15:00",{text:"5:15 PM"}],["17:30:00",{text:"5:30 PM"}],["17:45:00",{text:"5:45 PM"}],["18:00:00",{text:"6:00 PM"}],["18:15:00",{text:"6:15 PM"}],["18:30:00",{text:"6:30 PM"}],["18:45:00",{text:"6:45 PM"}],["19:00:00",{text:"7:00 PM"}],["19:15:00",{text:"7:15 PM"}],["19:30:00",{text:"7:30 PM"}],["19:45:00",{text:"7:45 PM"}],["20:00:00",{text:"8:00 PM"}],["20:15:00",{text:"8:15 PM"}],["20:30:00",{text:"8:30 PM"}],["20:45:00",{text:"8:45 PM"}],["21:00:00",{text:"9:00 PM"}],["21:15:00",{text:"9:15 PM"}],["21:30:00",{text:"9:30 PM"}],["21:45:00",{text:"9:45 PM"}],["22:00:00",{text:"10:00 PM"}],["22:15:00",{text:"10:15 PM"}],["22:30:00",{text:"10:30 PM"}],["22:45:00",{text:"10:45 PM"}],["23:00:00",{text:"11:00 PM"}],["23:15:00",{text:"11:15 PM"}],["23:30:00",{text:"11:30 PM"}],["23:45:00",{text:"11:45 PM"}]]);function hn({onBook:e}){const[t,n]=E(Ye(Se)),[i,o]=E(Ye(Se)),[s,c]=E(!1);A(()=>{let u=!0;async function h(){for(;s&&u;)await e(t,i),await new Promise(d=>setTimeout(d,1e3))}return h(),()=>{u=!1}},[s]);const a=()=>{c(!s)},l=Ue(()=>{const u=ge(t),h=new Map;for(const[d,{text:f}]of Se.entries())ge(d)>u&&h.set(d,{text:f});return o(Ye(h)),h},[t]);return r(k,{children:r("div",{className:"flex flex-col",children:[r("h2",{className:"text-xl font-semibold",children:"Auto Booking"}),r("p",{className:"text-sm text-red-500 mt-2 mb-2",children:"\u26A0\uFE0F You must keep this page open for auto booking to work."}),r("div",{className:"flex flex-row",children:[r("div",{children:[r("p",{className:"text-sm mt-0 mb-2",children:"The earliest time you'd want to book the experience."}),r(Be,{className:"mb-4",options:Se,selected:t,onChange:n,title:"Minimum Booking Time"})]}),r("div",{children:[r("p",{className:"text-sm mt-0 mb-2",children:"The latest time you'd want to book the experience."}),r(Be,{className:"mb-4",options:l,selected:i,onChange:o,title:"Maximum Booking Time"})]})]}),r(L,{className:`p-2 mb-24 text-white ${s&&"bg-red-500"}`,onClick:a,children:s?"Stop Auto Booking":"Start Auto Booking"})]})})}function Ct(){const{ineligible:e}=xr();return r(H,{guests:e,conflicts:Object.fromEntries(e.map(t=>[t.id,t.eligibleAfter?`TOO EARLY (${J(t.eligibleAfter)})`:t.ineligibleReason||"ELIGIBLE FOR NEW BOOKING"]))})}function Ps(){const{genie:e}=O(),t=ce();return r(k,{children:[t.current?r(k,{children:[r("h3",{children:"Unable to Modify"}),r("p",{children:"Your current reservation cannot be modified to this experience due to the following conflicts:"})]}):r(k,{children:[e.nextBookTime&&e.nextBookTime.slice(0,5)>$().time.slice(0,5)&&r(wr,{children:["Eligible at ",r(re,{time:e.nextBookTime})]}),r("h3",{children:"No Eligible Guests"}),r("p",{children:"No one in your party is currently eligible for this Lightning Lane."})]}),r(Ct,{})]})}function Is({onRefresh:e}){return r(k,{children:[r("h3",{children:"No Guests Found"}),r("p",{children:"Your party could not be loaded. This is probably just a temporary network error. Wait a few seconds and try again."}),r(W,{onClick:e,children:"Try Again"})]})}function Ss(e){return r("div",{className:`mt-4 border-2 rounded border-red-600 p-1 font-semibold text-center text-red-600 bg-red-100 ${e.className}`,children:e.children})}function Cs({party:e}){const{eligible:t,ineligible:n,selected:i,setSelected:o,experience:s}=e,[c,a]=E(new Set(i)),[l,u]=or(),{maxPartySize:h}=O().genie;function d(f){a(m=>{u(""),m=new Set(m);const _=m.has(f)?"delete":"add";return _==="add"&&m.size>=h?u(`Maximum party size: ${h}`):m[_](f),m})}return r(br,{value:e,children:r(U,{title:"Modify Party",theme:s.park.theme,children:[r("h2",{children:s.name}),r("div",{children:s.park.name}),r("h3",{children:"Your Party"}),r(H,{guests:t,selectable:{isSelected:f=>c.has(f),onToggle:d}}),n.length>0&&r(k,{children:[r("h3",{children:"Ineligible Guests"}),r(Ct,{})]}),r(W,{back:!0,disabled:c.size===0,onClick:()=>{o(t.filter(f=>c.has(f)))},children:"Confirm Party"}),l]})})}function At({button:e}){const{goTo:t}=G(),n=xr(),{eligible:i,selected:o}=n,{maxPartySize:s}=O().genie;return r(k,{children:[i.length>s&&o.length===s&&r(Ss,{children:"Party size restricted"}),o.length>0?r(k,{children:[r("div",{className:"mt-4",children:[r("h3",{className:"inline mt-0",children:"Your Party"}),r(L,{type:"small",onClick:()=>t(r(Cs,{party:n})),className:"ml-3",children:"Modify Party"})]}),r(H,{guests:o})]}):r(k,{children:[r("h3",{children:"Ineligible Guests"}),r(Ct,{})]}),e]})}function As(){return r(k,{children:[r("h3",{children:"No Reservations Available"}),r("p",{children:"There aren't enough reservation slots available for your entire party. If only part of your group wishes to go on this attraction, edit your party to check again. Otherwise, go back to the tip board and select another attraction."}),r(At,{})]})}function Ds({offer:e,onBook:t}){const n=ce();return r(k,{children:[r(St,{...e}),e.changed&&r("div",{className:"text-sm",children:[r("strong",{children:"Note:"})," Return time has been changed"]}),r(At,{button:r(W,{onClick:t,children:`${n.current?"Modify":"Book"} Lightning Lane`})})]})}const Ms=500,mn=100,Rs=5,Ls=5*6e4;let Nr=0,Ce=0;const pn=()=>Date.now()+Nr;class $s extends Error{constructor(){super(...arguments);C(this,"name","SyncFailed")}}async function Os(){if(Date.now()-Ce<Ls)return;const e=Ce;Ce=Date.now();let t=mn+1;try{const n=[];for(let i=0;i<Rs;++i){try{const o=await Bs();Number.isInteger(o)&&n.push(o)}catch(o){console.error(o);continue}if(!(n.length<2)){n.sort((o,s)=>o-s);for(const[o,s]of n.slice(0,-1).entries()){const c=n[o+1],a=Math.abs(s-c);a<t&&(t=a,Nr=Math.round((s+c)/2))}if(t<=mn)return}}throw new $s}catch(n){throw Ce=e,n}}async function Bs(){const e=Date.now(),{headers:t}=await fetch("https://bg1.joelface.com/t"),n=Date.now();if(n-e>Ms)return NaN;const o=parseFloat(String(t==null?void 0:t.get("T")))*1e3;return Math.round(o-(e+n)/2)}const Gs=50;function Us({onSync:e}){const[t,n]=E(pn());return A(()=>{const i=setInterval(()=>n(pn()),Gs);return()=>clearInterval(i)},[]),A(()=>{Os().then(()=>e(!0)).catch(()=>e(!1))},[e]),r("time",{children:$(t).time})}function Er({time:e,label:t}){const[n,i]=E(!0);return r("table",{className:"mt-4 mx-auto text-gray-500",children:r("tbody",{children:[r(fn,{heading:t,time:r("time",{children:e||"--:--:--"})}),r(fn,{heading:"Current time",time:r(k,{children:[r(Us,{onSync:i}),!n&&r("span",{className:"text-sm font-sans font-semibold text-red-600",children:[" ","(unsynced)"]})]})})]})})}function fn({heading:e,time:t}){return r("tr",{children:[r("th",{scope:"row",className:"pr-3 text-right text-xs font-semibold uppercase",children:[e,":"]}),r("td",{className:"text-xl font-mono leading-tight",children:["\uFEFF",t]})]})}function zs({startTime:e,onRefresh:t}){return r(k,{children:[e?r(k,{children:[r(Er,{time:e,label:"Booking start"}),r("p",{children:["At"," ",r("time",{dateTime:e,className:"font-semibold",children:J(e)}),", tap the ",r("span",{className:"font-semibold",children:"Check Availability"})," ","button below to start booking this Lightning Lane."]})]}):r("p",{children:"Sorry, but you can't make a Lightning Lane reservation for this attraction yet."}),r(At,{button:r(W,{onClick:t,children:"Check Availability"})})]})}function Hs({experience:e}){const{request:t}=vs({onError:b=>{console.error(`error requesting wake lock: ${b}`)}}),{goTo:n}=G(),i=O(),{genie:o}=i,{refreshPlans:s}=me(),c=ce(),[a,l]=E(),[u,h]=E(!e.flex.available&&e.flex.enrollmentStartTime!==void 0);h(!1);const[d,f]=E(u?null:void 0),{loadData:m,loaderElem:_}=X();async function w(b){!d||!a||(b&&f(b),m(async()=>{let P=null;P=await o.book(d,c.current,a.selected),c.end();const T=new Set(a.selected.map(D=>D.id)),S=P.guests.filter(D=>!T.has(D.id));S.length>0&&(await o.cancelBooking(S),P.guests=P.guests.filter(D=>T.has(D.id))),P&&n(r(xe,{booking:P,isNew:!0}),{replace:!0}),s(),It(i,"G")},{messages:{410:"Offer expired"}}))}function N(){m(async b=>{var S;const T=(await o.experiences(e.park)).find(D=>D.id===e.id);(S=T==null?void 0:T.flex)!=null&&S.available?(h(!1),f(void 0)):b("Reservations not open yet")})}const v=z(()=>{m(async()=>{const b=c.current?{eligible:c.current.guests,ineligible:[]}:await o.guests(e);l({...b,selected:b.eligible.slice(0,o.maxPartySize),setSelected:P=>l(T=>{if(!T)return T;const S=new Set(T.selected);return h(D=>(D||f(Z=>Z===null||P.some(Lr=>!S.has(Lr))?void 0:Z),D)),{...T,selected:P}}),experience:e})})},[o,e,c,m]);A(()=>{a||v()},[a,v]);const p=z(async b=>{if(!a||a.selected.length===0)return;let P;return m(async()=>{try{P=await o.offer(e,a.selected,c.current);const{ineligible:T}=P.guests;if(T.length>0){const S=new Set(T.map(Z=>Z.id)),D=Z=>!S.has(Z.id);l({...a,eligible:a.eligible.filter(D),ineligible:[...T,...a.ineligible],selected:a.selected.filter(D)})}P.active?(d&&(P.changed=!1),f(P)):f(S=>S??null)}catch(T){throw b||f(null),T}},{messages:{410:d?"No reservations available":""}}),P},[o,e,a,d,c,m]),y=z(async(b,P)=>{if(!a)return;const T=await p();if(!T)return;const S=ge(b),D=ge(P),Z=ge(T.start.time);Z>=S&&Z<=D&&await w(T)},[o,n,d,a,c,s]);A(()=>{d===void 0&&p()},[d,p]);const g=(a==null?void 0:a.eligible.length)===0,x=g&&(a==null?void 0:a.ineligible.length)===0;return A(()=>{t()},[]),r(U,{title:"Lightning Lane",theme:e.park.theme,buttons:r(k,{children:[r(Es,{}),!u&&r(je,{onClick:()=>{g?v():p()},name:g?"Party":"Offer"})]}),subhead:r(_r,{}),children:[r("h2",{children:e.name}),r("div",{children:e.park.name}),a&&r(br,{value:a,children:u&&a?r(zs,{startTime:e.flex.enrollmentStartTime,onRefresh:N}):x?r(Is,{onRefresh:v}):g?r(Ps,{}):!a||d===void 0?r("div",{}):d===null?r(k,{children:[r(As,{}),r(hn,{onBook:y})]}):r(k,{children:[r(Ds,{offer:d,onBook:w}),r(hn,{onBook:y})]})}),_]})}function Dt({label:e,children:t}){return r("div",{className:"flex items-center flex-1 whitespace-nowrap",children:[r("span",{className:"mr-2 text-xs font-semibold uppercase text-gray-500",children:e})," ",t]})}function Fs({experience:e}){const{goTo:t}=G(),{flex:n}=e;return r(Dt,{label:"Genie+",children:r("span",{children:r(L,{onClick:()=>t(r(Hs,{experience:e})),children:n.nextAvailableTime?J(n.nextAvailableTime):"none"})})})}function Tr({children:e}){return r("div",{className:"mt-8 flex justify-center",children:r("div",{children:[r("h2",{className:"mt-0 pl-1 text-gray-500 text-sm leading-tight uppercase",children:"Symbols"}),r("div",{className:"border-2 border-gray-500 rounded px-2 py-0.5 bg-gray-100",children:r("table",{children:r("tbody",{children:e})})})]})})}function de({sym:e,def:t,onInfo:n}){return r("tr",{children:[r("th",{className:"py-0.5 text-center font-bold",children:e}),r("td",{className:"pl-3 py-0.5",children:t}),n&&r("td",{className:"pl-3 py-0.5",children:r(L,{type:"small",onClick:n,children:"Info"})})]})}function Pr(e){const{parks:t}=O(),{park:n,setPark:i}=Fe(),o=ce(),s=Ue(()=>new Map(t.map(c=>[c.id,{value:c,icon:c.icon,text:c.name}])),[t]);return r(Be,{...e,options:s,selected:n.id,onChange:i,disabled:!!o.current,title:"Park","data-testid":"park-select"})}function js({experience:{type:e,standby:t}}){return t.displayNextShowTime||e==="ENTERTAINMENT"&&!t.waitTime?r(Vs,{standby:t}):r(Ws,{standby:t})}const Ws=({standby:e})=>r(Dt,{label:"Standby",children:e.available?r(Sr,{time:e.waitTime!==void 0?e.waitTime+" min":"now"}):r(Cr,{text:"down"})}),Vs=({standby:e})=>r(Dt,{label:r(k,{children:["Next ",r("span",{className:"hidden xs:inline",children:"Show"})]}),children:e.displayNextShowTime?r(Sr,{time:e.displayNextShowTime}):r(Cr,{text:"none"})}),Ir="inline-block border-2 rounded px-1.5 py-0.5 font-semibold",Sr=({time:e})=>r("span",{className:`${Ir} border-gray-500 text-gray-500 bg-gray-100`,children:e}),Cr=({text:e})=>r("span",{className:`${Ir} border-red-600 text-red-600 bg-red-100`,children:e});function Ys({bookTime:e,dropTime:t}){const n=F();return!e&&!t?null:r("div",{className:`flex justify-center gap-x-10 ${n.bg} text-white text-sm font-semibold uppercase text-center`,children:[r(_n,{label:"Book",time:e}),r(_n,{label:"Drop",time:t})]})}function _n({label:e,time:t}){if(!t)return null;t=t.slice(0,5);const n=$().time.slice(0,5);return r("div",{children:[e,":"," ",r("time",{dateTime:t,className:"whitespace-nowrap",children:t>n?J(t):"now"})]})}async function qs(e={}){return new Promise((t,n)=>{navigator.geolocation.getCurrentPosition(i=>{t(i)},i=>{n(i)},e)})}const Ks={maximumAge:15e3,timeout:2e3};function Qs(){const[e,t]=E(),n=z(async()=>{try{const{coords:i}=await qs(Ks);t(o=>o&&i.latitude===o[0]&&i.longitude===o[1]?o:[i.latitude,i.longitude])}catch{t(void 0)}},[]);return[e,n]}const Js=(e,t)=>(e.priority||1/0)-(t.priority||1/0),Je=(e,t)=>(t.standby.waitTime||-1)-(e.standby.waitTime||-1),Xe=(e,t)=>{var n,i;return ue(((n=e==null?void 0:e.flex)==null?void 0:n.nextAvailableTime)||"00:00")-ue(((i=t==null?void 0:t.flex)==null?void 0:i.nextAvailableTime)||"00:00")},Xs=(e,t)=>e.name.toLowerCase().localeCompare(t.name.toLowerCase()),gn=(e,t)=>Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)),Zs=(e,t,n)=>e.geo===t.geo?0:e.geo?t.geo?n?gn(e.geo,n)-gn(t.geo,n):0:-1:1,eo={priority:(e,t)=>Js(e,t)||Je(e,t)||Xe(e,t),standby:(e,t)=>Je(e,t)||Xe(e,t),soonest:(e,t)=>Xe(e,t)||Je(e,t),nearby:(e,t,n)=>Zs(e,t,n),aToZ:()=>0},to=new Map([["priority",{text:"Priority"}],["nearby",{text:"Nearby"}],["standby",{text:"Standby"}],["soonest",{text:"Soonest"}],["aToZ",{text:"A to Z"}]]);function no(e,t){const{n,s:i,e:o,w:s}=e.geo,[c,a]=t;return c<n&&c>i&&a<o&&a>s}function ro(){const{experiences:e,park:t}=Fe(),[n,i]=Qs(),[o,s]=E("priority");A(()=>{o==="nearby"&&i()},[e,o,i]);const c=z((l,u)=>{var h,d;return Number((h=u==null?void 0:u.flex)==null?void 0:h.available)-Number((d=l==null?void 0:l.flex)==null?void 0:d.available)||eo[o==="nearby"&&!(n&&no(t,n))?"priority":o](l,u,n)||Xs(l,u)},[n,t,o]),a=z(l=>r(Be,{...l,options:to,selected:o,onChange:s,title:"Sort By"}),[o]);return{sorter:c,SortSelect:a}}const io=30,so=60,yn=["bg1","genie","tipBoard","starred"],ut="Lightning Pick",ht="Upcoming Drop",mt="Booked",vn=e=>e.experienced&&!e.starred;function oo({contentRef:e}){gs();const{genie:t}=O(),{experiences:n,refreshExperiences:i,park:o,loaderElem:s}=Fe(),{sorter:c,SortSelect:a}=ro(),l=Q(!0);A(()=>{var h;l.current||(h=e.current)==null||h.scroll(0,0)},[a,e]),A(()=>{l.current=!1},[]);const u=_e(o.dropTimes)[0];return r(Pt,{title:"Genie+",buttons:r(k,{children:[r(a,{}),r(Pr,{}),r(je,{name:"Experiences",onClick:i})]}),subhead:r(k,{children:[r(_r,{}),r(Ys,{bookTime:t.nextBookTime,dropTime:u})]}),contentRef:e,children:[r(ao,{experiences:n,park:o,dropTime:u,sorter:c}),s]})}const ao=bt(function({experiences:t,park:n,dropTime:i,sorter:o}){const{goTo:s}=G(),c=F(),[a,l]=E(()=>{const p=B.get(yn)??[];return new Set(Array.isArray(p)?p:[])}),u=ue($().time);function h({id:p}){l(y=>(y=new Set(y),y.has(p)?y.delete(p):y.add(p),B.set(yn,[...y]),y))}const d=()=>s(r(lo,{})),f=p=>s(r(uo,{park:n,experience:p})),m=()=>s(r(ho,{})),_=({experiences:p,type:y})=>r("ul",{"data-testid":y,children:p.map(g=>{const[x]=_e(g.dropTimes??[]);return r("li",{className:"pb-3 first:border-0 border-t-4 border-gray-300",children:[r("div",{className:"flex items-center gap-x-2 mt-2",children:[r(co,{experience:g,toggleStar:h}),r("h3",{className:"flex-1 mt-0 text-lg font-semibold leading-tight truncate",children:g.name}),g.lp?r(Ze,{name:ut,icon:dt,onClick:d}):x?r(Ze,{name:ht,icon:dn,onClick:()=>f(g),className:x!==i?"opacity-50":""}):null,g.flex.preexistingPlan&&r(Ze,{name:mt,icon:ln,onClick:m})]}),r("div",{className:"flex flex-wrap gap-1.5 mt-2",children:[r(js,{experience:g}),r(Fs,{experience:g})]})]},g.id+(g.starred?"*":""))})}),w=t.filter(p=>!!p.flex).map(p=>{var x;const y=p.standby.waitTime||0,g=(x=p==null?void 0:p.flex)==null?void 0:x.nextAvailableTime;return{...p,lp:!!g&&y>=io&&ue(g)-u<=Math.min(so,(4-Math.trunc(p.priority||4))/3*y),starred:a.has(p.id)}}).sort((p,y)=>+!p.starred-+!y.starred||+!p.lp-+!y.lp||o(p,y)),N=w.filter(p=>!vn(p)),v=w.filter(vn).sort((p,y)=>p.name.localeCompare(y.name));return r(k,{children:[r(_,{experiences:N,type:"unexperienced"}),v.length>0&&r(k,{children:[r("h2",{className:`-mx-3 px-3 py-1 text-sm uppercase text-center ${c.bg} text-white`,children:"Previously Experienced"}),r(_,{experiences:v,type:"experienced"})]}),(N.length>0||v.length>0)&&r(Tr,{children:[r(de,{sym:r(dt,{className:c.text}),def:ut,onInfo:d}),n.dropTimes.length>0&&r(de,{sym:r(dn,{className:c.text}),def:ht,onInfo:f}),r(de,{sym:r(ln,{className:c.text}),def:mt,onInfo:m})]})]})});function Ze({name:e,icon:t,onClick:n,className:i}){const o=F();return r("button",{title:`${e} (more info)`,className:`-mx-2 px-2 ${o.text} ${i}`,onClick:n,children:r(t,{})})}function co({experience:e,toggleStar:t}){const n=F();return r("button",{title:`${e.starred?"Remove from":"Add to"} Favorites`,className:"-m-2 p-2",onClick:()=>t(e),children:r(_s,{className:e.starred?n.text:"text-gray-300"})})}function lo(){return r(U,{title:ut,children:r("p",{children:"When an attraction with a long standby wait has a Lightning Lane return time in the near future, it's highlighted as a Lightning Pick. Book these quick before they're gone!"})})}function uo({park:e,experience:t}){const n=O(),i=_e((t==null?void 0:t.dropTimes)??[])[0],o=n.parks.filter(s=>s.dropTimes.length>0).sort((s,c)=>s===e?-1:c===e?1:0);return r(U,{title:ht,children:[r("p",{children:[t?r("b",{children:t.name}):"This attraction"," may be part of"," ",i?r(k,{children:["the"," ",r("time",{dateTime:i,className:"font-semibold",children:J(i)})]}):r(k,{children:"an upcoming"})," ","drop of additional Lightning Lane inventory, with earlier return times than what's currently being offered. Availability varies but is always limited, so be sure you're ready to book when the drop time arrives!"]}),o.map(s=>{const[c]=_e(s.dropTimes);return r("div",{className:`mt-5 rounded overflow-hidden ${s.theme.bg}`,children:[r("h2",{className:`mt-0 py-1 ${s.theme.bg} text-white text-base text-center`,children:s.name}),r("div",{className:"flex flex-col px-2 pb-3 bg-white bg-opacity-90",children:n.dropExperiences(s).map((a,l)=>{var d;const u=l===1&&s.name==="Hollywood Studios",h=new Set(_e(a.dropTimes??[]));return r("div",{children:[r("h3",{className:`mt-3 text-base ${u?`${s.theme.text}font-bold`:""}`,children:a.name}),r("ul",{className:"flex flex-wrap gap-y-2 mt-1 leading-tight",children:(d=a.dropTimes)==null?void 0:d.map(f=>{const m=f===c;return r("li",{className:"min-w-[6em] text-center",children:[r("div",{className:`${m?`${s.theme.text} font-bold`:h.has(f)?"font-semibold":"text-gray-500"}`,children:r("time",{dateTime:f,children:J(f)})}),m?r("div",{className:`rounded-sm ${s.theme.bg} text-white text-opacity-90 text-xs font-semibold text-center uppercase`,children:"next"}):null]},f)})})]},a.id)})})]},s.id)})]})}function ho(){return r(U,{title:mt,children:r("p",{children:"You currently have a Lightning Lane reservation for this attraction."})})}/**
 * Exit icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function mo(e){return r(j,{...e,children:r("path",{d:"M12 10v-2h-5v-2h5v-2l3 3zM11 9v4h-5v3l-6-3v-13h11v5h-1v-4h-8l4 2v9h4v-3z"})})}/**
 * News icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function po(e){return r(j,{...e,children:r("path",{d:"M14 4v-2h-14v11c0 0.552 0.448 1 1 1h13.5c0.828 0 1.5-0.672 1.5-1.5v-8.5h-2zM13 13h-12v-10h12v10zM2 5h10v1h-10zM8 7h4v1h-4zM8 9h4v1h-4zM8 11h3v1h-3zM2 7h5v5h-5z"})})}/**
 * Cog icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function fo(e){return r(j,{...e,children:r("path",{d:"M14.59 9.535c-0.839-1.454-0.335-3.317 1.127-4.164l-1.572-2.723c-0.449 0.263-0.972 0.414-1.529 0.414-1.68 0-3.042-1.371-3.042-3.062h-3.145c0.004 0.522-0.126 1.051-0.406 1.535-0.839 1.454-2.706 1.948-4.17 1.106l-1.572 2.723c0.453 0.257 0.845 0.634 1.123 1.117 0.838 1.452 0.336 3.311-1.12 4.16l1.572 2.723c0.448-0.261 0.967-0.41 1.522-0.41 1.675 0 3.033 1.362 3.042 3.046h3.145c-0.001-0.517 0.129-1.040 0.406-1.519 0.838-1.452 2.7-1.947 4.163-1.11l1.572-2.723c-0.45-0.257-0.839-0.633-1.116-1.113zM8 11.24c-1.789 0-3.24-1.45-3.24-3.24s1.45-3.24 3.24-3.24c1.789 0 3.24 1.45 3.24 3.24s-1.45 3.24-3.24 3.24z"})})}/**
 * User icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function _o(e){return r(j,{...e,children:r("path",{d:"M9 11.041v-0.825c1.102-0.621 2-2.168 2-3.716 0-2.485 0-4.5-3-4.5s-3 2.015-3 4.5c0 1.548 0.898 3.095 2 3.716v0.825c-3.392 0.277-6 1.944-6 3.959h14c0-2.015-2.608-3.682-6-3.959z"})})}function go(){const{goTo:e}=G(),[t]=E([{text:"Party Selection",icon:r(_o,{}),action:()=>e(r(ys,{}))},{text:"Log Out",icon:r(mo,{}),action:()=>V.deleteData()},{text:"BG1 News",icon:r(po,{}),action:()=>e(r(nr,{}))}]),[n,i]=E(!1),o=Q(null);return r(k,{children:[r("button",{className:"absolute top-0 right-0 h-full px-4",onClick:()=>i(!0),title:"Settings Menu",children:r(fo,{})}),n&&r(Tt,{onClick:s=>{var c;(c=o.current)!=null&&c.contains(s.target)||i(!1)},"data-testid":"shade",children:r("ul",{className:"overflow-auto min-w-[50%] max-h-[90%] rounded-lg bg-white text-black text-lg font-normal",ref:o,children:t.map(s=>r("li",{className:"border-t-2 first:border-0 border-gray-300",children:r("button",{className:"flex flex-row items-center w-full px-4 py-3",onClick:()=>{i(!1),setTimeout(s.action,50)},children:[r("span",{className:"mr-2.5 text-gray-700","aria-hidden":!0,children:s.icon}),s.text]})},s.text))})})]})}function Ar(e){const[t,n]=e.split(":").map(Number);return t*60+n}const yo=(e,t)=>Ar(e)-t;function bn({park:e,onSelect:t}){const{das:n}=O(),{loadData:i,loaderElem:o}=X(),[s,c]=E();A(()=>{i(async()=>{const l=await n.experiences(e);c(l.filter(u=>u.available&&!!u.nextAvailableTime).sort((u,h)=>u.name.localeCompare(h.name)))})},[e,n,i]);const a=[{heading:"Attractions",type:"ATTRACTION"},{heading:"Characters",type:"CHARACTER"},{heading:"Entertainment",type:"ENTERTAINMENT"}];return r(U,{title:"Select Experience",theme:e.theme,children:[s?s.length===0?r("p",{children:"No DAS experiences available"}):r(k,{children:a.map(l=>r(vo,{park:e,experiences:s.filter(u=>u.type===l.type),heading:l.heading,onSelect:t},l.type))}):null,o]})}function vo({park:e,experiences:t,heading:n,onSelect:i}){if(t.length===0)return null;const o=Ar($().time);return r("div",{className:`mt-4 rounded overflow-hidden ${e.theme.bg}`,children:[r("h3",{className:"mt-0 py-1 text-white text-xs font-semibold text-center uppercase",children:n}),r("ul",{className:"bg-white bg-opacity-90 leading-snug",children:t.map(s=>r("li",{className:"flex items-center pt-3 last:pb-3",children:[r("div",{className:"flex-1 px-2",children:s.name}),r("div",{className:"px-2",children:r(L,{onClick:()=>i(s),children:r("span",{className:"min-w-[4rem]",children:[yo(s.nextAvailableTime,o)," ",r("abbr",{title:"minutes",children:"min."})]})})})]},s.id))})]})}function xn({park:e,party:t}){const{goTo:n,goBack:i}=G(),o=O(),{das:s}=o,{refreshPlans:c}=me(),[a,l]=E(),[u,h]=E(new Set(t)),[d,f]=E({}),{loadData:m,loaderElem:_}=X();async function w(){a&&m(async()=>{try{const N=await s.book({park:e,experience:a,guests:[...u]});c(),It(o,"D"),await i({screen:he}),n(r(xe,{booking:N,isNew:!0}))}catch(N){throw N instanceof ct&&f(N.conflicts),N}},{messages:{[ct.name]:"Some guests not eligible",[Wn.name]:"Experience currently unavailable"}})}return r(U,{title:"DAS Selection",theme:e.theme,children:[r("h3",{children:"Experience"}),a?r("div",{className:"flex items-center mt-3",children:[r("div",{className:"text-lg font-semibold truncate",children:a.name}),r("div",{className:"ml-3",children:r(L,{type:"small",onClick:()=>n(r(bn,{park:e,onSelect:N=>{l(N),i()}})),children:"Modify"})})]}):r("div",{className:"mt-3 text-center",children:r(L,{onClick:()=>n(r(bn,{park:e,onSelect:N=>{l(N),i()}})),children:"Select Experience"})}),r("h3",{children:"DAS Guest"}),r(H,{guests:t.slice(0,1),conflicts:d}),t.length>1&&r(k,{children:[r("h3",{children:"Additional Guests"}),r(H,{guests:t.slice(1),selectable:{isSelected:N=>u.has(N),onToggle:N=>{u.has(N)?u.delete(N):u.add(N),h(new Set(u))}},conflicts:d})]}),r(W,{disabled:!t||!a,onClick:w,children:"Request Return Time"}),_]})}function bo({parties:e}){const{goTo:t}=G(),{park:n}=He(),{plans:i,refreshPlans:o,loaderElem:s}=me();yt(o,[o]);const c=new Set(e.map(d=>d[0]).map(d=>d.id)),a=i.filter(d=>d.type==="DAS"&&d.subtype==="IN_PARK"),l=new Map(a.filter(d=>d.type==="DAS"&&d.subtype==="IN_PARK").map(d=>{var f;return[((f=d.guests.find(m=>c.has(m.id)))==null?void 0:f.id)??"",d]}));if(!s&&e.length===1){const d=e[0],f=l.get(d[0].id);return f?r(xe,{booking:f}):r(xn,{park:n,party:d})}const u=e.filter(d=>!(l!=null&&l.has(d[0].id))),h=e.filter(d=>l==null?void 0:l.has(d[0].id));return r(U,{title:`DAS ${e.length===1?"Selection":"Parties"}`,theme:n.theme,children:s||(e.length>0?r(k,{children:[u.length>0&&r(k,{children:[r("h3",{children:"Select Next Experience"}),r("ul",{className:"mt-2",children:u.map(d=>r("li",{className:"flex items-center gap-x-3 pl-3 py-1",children:[r("span",{className:"flex-shrink-0 w-[48px] h-[48px] leading-[48px] rounded-full text-3xl font-bold text-center bg-gray-400 text-white","aria-hidden":"true",children:d[0].avatarImageUrl?r("img",{src:d[0].avatarImageUrl,alt:"",width:"48",height:"48",className:"rounded-full"}):d[0].name[0]}),r("span",{className:"flex-1 leading-tight",children:d[0].name}),r(L,{type:"small",onClick:()=>t(r(xn,{park:n,party:d})),children:"Select"})]},d[0].id))})]}),h.length>0&&r(k,{children:[r("h3",{children:"Current Selection"}),r("ul",{className:"mt-2",children:h.map(d=>{const f=l.get(d[0].id);return r("li",{className:"flex items-center gap-x-3 pl-3 py-1",children:[r("span",{className:"flex-shrink-0 w-[48px] h-[48px] leading-[48px] rounded-full text-3xl font-bold text-center bg-gray-400 text-white","aria-hidden":"true",children:d[0].avatarImageUrl?r("img",{src:d[0].avatarImageUrl,alt:"",width:"48",height:"48",className:"rounded-full"}):d[0].name[0]}),r("div",{className:"flex-1",children:[r("div",{children:d[0].name}),f&&r("div",{className:"text-gray-500 text-xs font-semibold uppercase",children:[f.name," @"," ",r(re,{time:f.start.time})]})]}),r(L,{type:"small",onClick:()=>{f&&t(r(xe,{booking:f}))},children:"Details"})]},d[0].id)})})]})]}):r("div",{}))})}function xo({contentRef:e}){const{goTo:t}=G(),{experiences:n,refreshExperiences:i,loaderElem:o}=Fe(),s=ir();return r(Pt,{title:"Times Guide",buttons:r(k,{children:[s.length>0&&r(L,{title:"Disability Access Service",onClick:()=>t(r(bo,{parties:s})),children:"DAS"}),r(Pr,{}),r(je,{name:"Times",onClick:i})]}),contentRef:e,children:[r(wo,{experiences:n}),o]})}const wo=bt(function({experiences:t}){const{goTo:n}=G(),i=s=>n(r(ko,{exp:s})),o=new Map;return t.filter(s=>s.standby.available||s.individual||s.standby.unavailableReason==="TEMPORARILY_DOWN").sort((s,c)=>s.land.sort-c.land.sort||s.name.localeCompare(c.name)).forEach(s=>{var c,a;o.has(s.land)||o.set(s.land,{ATTRACTION:[],ENTERTAINMENT:[],CHARACTER:[],HOLIDAY:[]}),(a=(c=o.get(s.land))==null?void 0:c[s.type])==null||a.push(s)}),r(k,{children:[[...o].map(([s,c])=>r("div",{children:[r("h2",{className:`pr-1 ${s.theme.text} text-sm font-semibold text-right uppercase`,children:s.name}),r("div",{className:"rounded overflow-hidden",children:[r(Ae,{title:"Attractions",land:s,experiences:c.ATTRACTION,onInfoClick:i}),r(Ae,{title:"Entertainment",land:s,experiences:c.ENTERTAINMENT,onInfoClick:i}),r(Ae,{title:"Holiday Entertainment",land:s,experiences:c.HOLIDAY,onInfoClick:i}),r(Ae,{title:"Characters",land:s,experiences:c.CHARACTER,onInfoClick:i})]})]},s.name)),t.length>0&&r(Tr,{children:[r(de,{sym:"*",def:"No posted wait/show time"}),r(de,{sym:"\u274C",def:"Temporarily down"}),r(de,{sym:"VQ",def:"Virtual queue"})]})]})});function Ae({title:e,land:t,experiences:n,onInfoClick:i}){return n.length===0?null:r("div",{className:`${t.theme.bg}`,"data-testid":`${t.name}-${e}`,children:[r("h3",{className:"mt-0 py-1 text-white text-xs font-semibold text-center uppercase",children:e}),r("table",{className:"w-full leading-snug",children:r("tbody",{children:n.map(o=>{var s;return r("tr",{className:"group",children:[r("td",{className:`${o.standby.displayNextShowTime?"min-w-[5.625rem]":"min-w-[2.75rem]"} px-2 py-0.5 group-first:pt-1 group-last:pb-1 bg-white bg-opacity-80 font-bold text-center uppercase whitespace-nowrap`,children:o.standby.displayNextShowTime?(((s=o.displayAdditionalShowTimes)==null?void 0:s.length)??0)>0?r("button",{onClick:()=>i(o),className:"underline",children:o.standby.displayNextShowTime}):o.standby.displayNextShowTime:o.standby.available?o.standby.waitTime??"*":o.virtualQueue&&o.standby.unavailableReason==="NOT_STANDBY_ENABLED"?"VQ":"\u274C"}),r("td",{className:"w-full px-1 pl-2 py-0.5 group-first:pt-1 group-last:pb-1 bg-white bg-opacity-90",children:r("div",{className:"flex items-center gap-x-2",children:[r("div",{className:`flex-1 ${o.type==="ATTRACTION"&&!o.virtualQueue&&(o.priority??4)<4?`font-bold ${t.theme.text}`:""}`,children:o.name}),(o==null?void 0:o.individual)&&r("div",{className:`${t.theme.text} text-xs leading-tight font-semibold text-center uppercase`,children:[r("div",{children:[r("abbr",{title:"Individual Lightning Lane",children:"ILL"}),"\u200A: "+o.individual.displayPrice]}),o.individual.nextAvailableTime&&r("div",{children:J(o.individual.nextAvailableTime)})]})]})})]},o.id)})})})]})}const ko=({exp:e})=>{var t;return r(U,{title:"Experience Info",children:[r("h2",{children:e.name}),r("div",{children:e.park.name}),r("h3",{children:["Upcoming ",e.type==="CHARACTER"?"Appearances":"Shows"]}),r("ul",{className:"list-disc mt-2 pl-6",children:[!!e.standby.displayNextShowTime&&r("li",{children:e.standby.displayNextShowTime}),(t=e.displayAdditionalShowTimes)==null?void 0:t.map(n=>r("li",{children:n},n))]})]})},wn=6e4,Dr=["bg1","genie","merlock","tab"],No=()=>B.get(Dr)??"Genie+",Eo=[{name:"Genie+",icon:r(dt,{}),component:oo},{name:"Times",icon:r(fs,{}),component:xo},{name:"Plans",icon:r(mr,{}),component:kr}],To=r(go,{}),he=hs({tabs:Eo,footer:To},({tab:e})=>{const{current:t}=Xn(),n=ce(),{park:i}=He(),o=ps(),{refreshExperiences:s}=o,{refreshPlans:c}=me(),a=Q(null);return A(()=>{B.set(Dr,e.name)},[e]),A(()=>Nt(()=>{t.type===he&&(s(wn),c(wn))}),[t,s,c]),A(()=>{var l;n.current&&((l=a.current)==null||l.scroll(0,0))},[n]),r(tr,{value:i.theme,children:r(ms,{value:o,children:r(e.component,{contentRef:a})})})});function Po(){return r(Ji,{value:Xi(),children:r(as,{value:cs(),children:r(ls,{value:ds(),children:r(Zi,{value:es(),children:r(Zn,{children:r(he,{tabName:No()})})})})})})}function Mt({queue:e,title:t,children:n}){var i;return r(U,{title:t,theme:(i=e.park)==null?void 0:i.theme,children:[r("h2",{children:e.name}),n]})}const Io=5e3;function So({queue:e,guests:t,result:n}){const{boardingGroup:i,conflicts:o}=n,s=i!==null,c=t.filter(d=>!(d.id in o)),a=t.filter(d=>d.id in o),{goBack:l}=G(),[u,h]=E(!1);return A(()=>{s&&setTimeout(()=>h(!0),Io)},[s]),r(Mt,{queue:e,title:"Boarding Group",children:s?r(k,{children:[r("h3",{children:"Congratulations! \u{1F389}"}),r("p",{children:"You joined the virtual queue!"}),r("p",{className:"text-lg font-semibold",children:["Boarding Group: ",i]}),r(H,{guests:c}),Object.keys(o).length>0&&r(k,{children:[r("p",{className:"font-semibold",children:"These guests could not join:"}),r(H,{guests:a,conflicts:o})]}),r("p",{children:"Refer to the My Disney Experience app for return time and other information."}),u&&r(W,{onClick:()=>l({screen:Mr}),children:"Done"})]}):r(k,{children:[r("h3",{children:"Sorry!"}),r("p",{children:"A boarding group could not be obtained. Go back and try again."}),r(H,{guests:a,conflicts:o})]})})}function Co({queue:e,guests:t}){const{goTo:n}=G(),i=O(),{vq:o}=i,{loadData:s,loaderElem:c}=X();async function a(){await s(async l=>{const u=await o.getQueue(e);if(!u.isAcceptingJoins)return l(u.isAcceptingPartyCreation?"Queue not open yet":"No boarding groups available");const h=await o.joinQueue(e,t);n(r(So,{queue:e,guests:t,result:h}),{replace:!0}),h.boardingGroup!==null&&It(i,"V")},{minLoadTime:999})}return r(Mt,{queue:e,title:"Virtual Queue",children:[!e.isAcceptingJoins&&r(Er,{time:e.nextScheduledOpenTime,label:"Next queue opening"}),!e.isAcceptingJoins&&e.nextScheduledOpenTime!==null&&r("p",{children:["Tap the ",r("b",{children:"Join Virtual Queue"})," button when the clock reads"," ",r("time",{className:"font-semibold",children:e.nextScheduledOpenTime}),". The queue can fill up almost instantly, so be quick!"]}),r("h3",{children:"Your Party"}),r(H,{guests:t}),r(W,{onClick:a,children:"Join Virtual Queue"}),c]})}function Ao({queue:e}){const{goTo:t}=G(),{vq:n}=O(),{loadData:i,loaderElem:o,flash:s}=X(),[c,a]=E([]),[l,u]=E(new Set);A(()=>{i(async()=>{const d=await n.getLinkedGuests(e);a(d),u(new Set(d.filter(f=>f.preselected)))})},[e,n,i]);function h(d){const f=new Set(l);f[f.has(d)?"delete":"add"](d);const{maxPartySize:m}=e;m>0&&f.size>m?s(`Maximum party size: ${m}`):(u(f),s(""))}return r(Mt,{queue:e,title:"Choose Your Party",children:[e.howToEnterMessage.split(`

`).map((d,f)=>r("p",{children:d},f)),r("h3",{children:"Choose Your Party"}),c.length>0?r(H,{guests:c,selectable:{isSelected:d=>l.has(d),onToggle:h}}):r("p",{children:"No guests available"}),r(W,{disabled:l.size===0,onClick:()=>t(r(Co,{queue:e,guests:[...l]})),children:"Confirm Party"}),o]})}const kn=e=>e.categoryContentId==="attraction",De=e=>e.isAcceptingPartyCreation||e.isAcceptingJoins;function Mr(){const{vq:e}=O(),{goTo:t}=G(),n=F(),{loadData:i,loaderElem:o}=X(),[s,c]=E(),a=z(()=>{i(async()=>{c((await e.getQueues()).sort((l,u)=>+De(u)-+De(l)||+kn(u)-+kn(l)))})},[e,i]);return A(()=>(a(),Nt(a)),[a]),r(U,{title:"Virtual Queues",buttons:r(L,{title:"Refresh Queues",onClick:a,children:r(Et,{})}),footer:r("div",{className:"p-2 text-right",children:r(L,{className:`bg-opacity-90 bg-white ${n.text}`,onClick:()=>V.deleteData(),children:"Log Out"})}),children:[s?s.length>0?r("ul",{className:"mt-1",children:s.map(l=>r("li",{className:"py-3 first:border-0 border-t-4 border-gray-300",children:[r("h2",{className:"mt-0",children:l.name}),r("div",{className:"flex items-center mt-2",children:[r("div",{className:"flex-1",children:l.isAcceptingJoins?r("span",{children:"Available now"}):l.nextScheduledOpenTime?r(k,{children:["Next opening:"," ",r("time",{dateTime:l.nextScheduledOpenTime,className:"font-semibold",children:J(l.nextScheduledOpenTime)})]}):"No more openings today"}),r("div",{className:"pl-3",children:r(L,{disabled:!De(l),onClick:()=>t(r(Ao,{queue:l})),children:De(l)?"Join Queue":"Closed"})})]})]},l.id))}):!o&&r("p",{className:"text-gray-500 font-semibold text-center uppercase",children:"No virtual queues found"}):null,o]})}function Do(){return r(Zn,{children:r(Mr,{})})}const Mo=0;function Ro(){document.body.addEventListener("click",()=>null)}function Lo(){const[e,t]=E(),[n,i]=E(r("div",{})),o=ji(),s=Vi(Mo),[c,a]=E(()=>{try{V.getData()}catch(l){if(!(l instanceof Hn))throw l;return!0}return!1});return A(()=>{Ro()},[]),A(()=>{V.onUnauthorized=()=>a(!0),(async()=>{for(const[l,u]of[[qn,Po],[wt,Do]])try{const h=await Si(l.originToResortId(origin));t(h),ui({WDW:"America/New_York",DLR:"America/Los_Angeles"}[h.id]),i(r(Li,{value:h,children:r(u,{})}));return}catch(h){if(!(h instanceof jn))throw h}location.assign("https://joelface.github.io/bg1/start.html")})()},[]),A(()=>{function l(){if(!c)try{V.getData(),a(!1)}catch{a(!0)}}return l(),Nt(l)},[c]),o||s||c&&e&&r(Qi,{resort:e,onLogin:l=>{V.setData(l),a(!1)}})||n}Rr();function Rr(){if(!document.body){setTimeout(Rr,100);return}document.close(),$o(),Oo(),Bo().render(r(Lo,{}))}function $o(){const e=document.createElement("meta");e.name="viewport",e.content="width=device-width, initial-scale=1, maximum-scale=1",document.head.appendChild(e)}function Oo(){const e=document.createElement("link");e.rel="icon",e.href="data:,",document.head.appendChild(e)}function Bo(){return di(document.body.appendChild(document.createElement("div")))}
